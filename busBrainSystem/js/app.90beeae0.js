(function(e){function t(t){for(var i,r,o=t[0],l=t[1],c=t[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&m.push(n[r][0]),n[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],i=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(i=!1)}i&&(s.splice(t--,1),e=r(r.s=a[0]))}return e}var i={},n={app:0},s=[];function r(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=i,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"02c6":function(e,t,a){"use strict";a("8f5e")},"02df":function(e,t,a){"use strict";function i(e,t){var a;t=t||200;return function(){var i=this,n=arguments;a&&clearTimeout(a),a=setTimeout((function(){a=null,e.apply(i,n)}),t)}}a.d(t,"a",(function(){return i}))},"0312":function(e,t,a){"use strict";a("7d90")},"034e":function(e,t,a){"use strict";(function(e){a("9113"),a("9e79"),a("6dbb"),a("e116");var i=a("02df");t["a"]={data:function(){var e=function(e,t,a){if(""===t)return a(new Error("请选择"));a()};return{tabLoading:!1,query:{page:1,pageSize:20,sort:""},authTab:[],total:0,oldauthsTree:[],authsTree:[],subBtnLonging:!1,dialogform:!1,AuthTreeData:null,parentData:[],sonData:[],thisSon:"",parent:[],authForm:{props:"",name:"",pid:1e3,pidSort:null,type:"1",url:"",code:"",insertSort:"",insertType:"",descr:""},isAction:"",defaultProps:{label:"name",children:"children",value:"Ids"},rules:{name:[{required:!0,message:"请输入权限名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20个字符",trigger:"blur"}],type:[{required:!0,validator:e,trigger:"change"}],url:[{required:!0,validator:e,trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100个字符",trigger:"blur"}],descr:[{required:!0,validator:e,trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100个字符",trigger:"blur"}]},FtypeData:["","菜单","","方法"]}},created:function(){this.getParent(),this.getAuthsTree()},mounted:function(){this.getAuthTab()},methods:{getAuthTab:function(){var t=this;this.tabLoading=!0,this.$fetchGet("auths",this.query).then((function(a){var i=a.list;e.each(i,(function(a,i){1==i.pid&&(i.parentname="无"),e.each(t.oldauthsTree,(function(e,t){i.pid==t.id&&(i.parentname=t.name)}))})),t.tabLoading=!1,t.authTab=i,t.total=a.total}))},getAuthsTree:function(){var e=this;this.$fetchGet("auths/authsTree").then((function(t){e.oldauthsTree=t.slice(0);var a=e.parseChildren(1e3,t.slice(0));e.deleteChildren(a),e.authsTree=a}))},getParent:function(){var e=this;this.$fetchGet("auths/authsTree").then((function(t){var a=e.parseChildren(1e3,t.slice(0));e.deleteChildren(a),e.parentData=a}))},getSon:function(e){var t=this;void 0!==e&&null!==e||(e=null),this.$fetchGet("auths/sonAuths",{pid:e}).then((function(e){t.sonData=e}))},subForm:Object(i["a"])((function(){var e=this;"add"!==this.isAction||this.authForm.pid||(this.authForm.pid=1e3),this.$refs.authForm.validate((function(t){if(t){var a=e.cloneObj(e.authForm);"null"==a.pidSort&&(a.pidSort=null),e.subBtnLonging=!0,"add"===e.isAction?e.$fetchPost("auths",a).then((function(t){t?(e.Gsuccess("添加成功"),e.dialogform=!1,e.getAuthTab(),e.getAuthsTree(),e.getParent()):e.Gerror(t.message),e.subBtnLonging=!1})):"update"===e.isAction&&(delete a.insertSort,delete a.insertType,delete a.pidSort,e.$fetchPut("auths/update",a).then((function(t){t?(e.Gsuccess("更新成功"),e.dialogform=!1,e.getAuthTab(),e.getAuthsTree(),e.getParent()):e.Gerror(t.message),e.subBtnLonging=!1})))}}))}),300),authsTreeNodeClick:function(e){this.query.sort=e.sort,this.getAuthTab()},emptyForm:function(){this.authForm={props:"",name:"",pid:null,pidSort:null,type:"1",url:"",code:"",insertSort:"",insertType:"",descr:""},this.parent=[],this.subBtnLonging=!1,this.$refs.authForm.resetFields()},parseChildren:function(t,a){var i=this,n=[];return e.each(a,(function(e,s){s.Ids=s.id+","+s.pid+","+s.sort,s.pid===t&&(n.push(s),s.children=i.parseChildren(s.id,a))})),n},deleteChildren:function(t){var a=this;e.each(t,(function(e,t){t.children&&t.children.length?a.deleteChildren(t.children):delete t.children}))},selectparent:function(e){var t=[];this.thisSon="",t=e[e.length-1].split(","),this.authForm.pid=t[0],this.authForm.pidSort=t[2],this.getSon(t[0])},selectSon:function(e){var t=e.split(",");this.authForm.insertId=t[0],this.authForm.insertSort=t[1]},addAuth:function(){this.isAction="add",this.dialogform=!0,this.getSon()},updateAuth:function(t){var a=this;this.isAction="update",this.dialogform=!0,e.each(this.authForm,(function(e,i){a.authForm[e]=t[e]+""})),this.authForm.id=t.id},deleteAuth:function(e){var t=this;this.$confirm("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$fetchDelete("auths",{id:e.id,pid:e.pid,sort:e.sort}).then((function(e){(e=1)?(t.Gsuccess("删除成功！"),t.getAuthTab(),t.getAuthsTree(),t.getParent()):t.Gerror(e.message)}))}))},Ftype:function(e,t,a){return this.FtypeData[e.type]},handleSizeChange:function(e){this.query.pageSize=e,this.getAuthTab()},handleCurrentChange:function(e){this.query.page=e,this.getAuthTab()},allAuth:function(){this.query.sort="",this.getAuthTab()}}}}).call(this,a("c65b"))},"03f3":function(e,t,a){"use strict";a("ce4a")},"046a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contentPage"},[a("div",{staticClass:"contentBorder"},[a("el-row",{staticClass:"topAdd"},[a("el-col",{staticClass:"queryinp",staticStyle:{width:"300px"}},[a("div",[a("el-input",{attrs:{placeholder:"数据表名查找",size:"small"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getRoleTab},slot:"append"})],1)],1)])],1),a("el-row",{staticClass:"rolecontent"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.tabLoading,expression:"tabLoading"}],staticClass:"roleTab",attrs:{"element-loading-text":"拼命加载中"}},[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleTabData,stripe:"",border:"",height:e.$store.getters.docHeight}},[a("el-table-column",{attrs:{resizable:!1,type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.props.row.columns}},[a("el-table-column",{attrs:{resizable:!1,label:"字段名",prop:"column_name"}}),a("el-table-column",{attrs:{resizable:!1,label:"数据类型",prop:"column_type"}}),a("el-table-column",{attrs:{resizable:!1,label:"是否为空",prop:"is_nullable"}}),a("el-table-column",{attrs:{resizable:!1,label:"约束类型",formatter:e.Formatterconstraint,prop:"constraint_type"}}),a("el-table-column",{attrs:{resizable:!1,label:"默认值",formatter:e.Formatterdefault,prop:"column_default"}}),a("el-table-column",{attrs:{resizable:!1,label:"描述",prop:"column_comment"}}),a("el-table-column",{attrs:{resizable:!1,label:"外键关联表",prop:"referenced_table_name"}}),a("el-table-column",{attrs:{resizable:!1,label:"联表字段",prop:"referenced_column_name"}})],1)],1)]}}])}),a("el-table-column",{attrs:{resizable:!1,label:"表名",prop:"table_name"}}),a("el-table-column",{attrs:{resizable:!1,label:"数据量",prop:"table_rows"}}),a("el-table-column",{attrs:{resizable:!1,label:"自增量当前值",prop:"auto_increment"}}),a("el-table-column",{attrs:{resizable:!1,label:"表描述",prop:"table_comment"}})],1)],1)])],1),a("div",{staticClass:"tabbottom"},[a("el-pagination",{attrs:{background:"","current-page":e.query.page,"page-sizes":[10,20,50,100],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"角色信息",visible:e.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{close:e.emptyForm,"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("div",[a("h3",[e._v("上级权限")]),a("ul",{staticClass:"ztree",attrs:{id:"roletree"}})])]),a("el-col",{attrs:{span:13}},[a("div",[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"80px","label-position":"right"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:"角色编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"请输入角色编码"},model:{value:e.addForm.code,callback:function(t){e.$set(e.addForm,"code",t)},expression:"addForm.code"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入描述内容"},model:{value:e.addForm.descr,callback:function(t){e.$set(e.addForm,"descr",t)},expression:"addForm.descr"}})],1),a("el-form-item",{attrs:{"label-width":"100px"}},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.subBtnLonging},on:{click:e.subForm}},[e._v("确 定")])],1)],1)],1)])],1)],1),a("el-dialog",{attrs:{title:"查看权限信息",visible:e.dialogform,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogform=t}}},[a("div",{staticStyle:{padding:"0 35%","box-sizing":"border-box"}},[a("ul",{staticClass:"ztree",attrs:{id:"tree"}})])])],1)},n=[],s=a("95a3"),r=s["a"],o=(a("d887"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"72fa58df",null);t["default"]=l.exports},"05451":function(e,t,a){"use strict";a("3963")},1:function(e,t){},"102d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.item.children&&e.item.children.length?a("el-submenu",{attrs:{index:e.navIndex}},[a("template",{slot:"title"},[a("i",{staticClass:"iconfont",class:e.item.props,staticStyle:{color:"#fff"}}),a("span",{staticClass:"menuIcon",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.name))])]),e._l(e.item.children,(function(t,i){return[t.children&&t.children.length?a("nav-item",{key:e.navIndex+"-"+i,attrs:{item:t,navIndex:e.navIndex+"-"+i}}):a("el-menu-item",{key:e.navIndex+"-"+i,attrs:{index:t.url}},[a("i",{staticClass:"iconfont",class:t.props,staticStyle:{color:"#fff"}}),a("span",{staticClass:"menuIcon",attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])]}))],2):a("el-menu-item",{attrs:{index:e.item.url}},[a("i",{staticClass:"iconfont",class:e.item.props,staticStyle:{color:"#fff"}}),a("span",{staticClass:"menuIcon",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.name))])])},n=[],s={name:"navItem",props:["item","navIndex"],created:function(){},mounted:function(){this.$store.commit("SET_ROUTERNOW",this.$route.path)}},r=s,o=(a("02c6"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,null,null);t["default"]=l.exports},"162e":function(e,t,a){"use strict";a.r(t);var i,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.$store.getters.aloading,expression:"$store.getters.aloading"}],staticClass:"layout",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.6)"}},[a("app-main"),a("div",{staticClass:"header-box"},[a("div",{staticClass:"menu-box"},[a("menu-nav")],1)]),a("div",{staticClass:"routelist"},e._l(e.quc(e.$store.getters.userRole),(function(t,i){return a("div",{key:i,class:e.getRouterName.name==t.name?"parallelogram parallelogram1":"parallelogram"},[a("div",{staticClass:"fontroute",on:{click:function(a){return e.topath(t)}}},[e._v(e._s(t.name))]),e.getRouterName.name!==t.name?a("div",{staticClass:"fontroute iconfont iconguanbi",staticStyle:{"font-size":"12px","margin-left":"0.5vw"},on:{click:function(a){return e.deleroute(t,i)}}}):e._e()])})),0)],1)},s=[],r=a("55ae"),o=(a("9e79"),a("9113"),a("74e1"),a("6fd2")),l=a("f19a"),c=(i={components:{menuNav:o["default"],appMain:l["default"]},computed:{getRouterName:function(){return this.$route.matched.slice(2)[0]},myallroute:function(){return this.quc(this.$store.getters.userRole)}},data:function(){return{myRouterName:[],loading:!0}},created:function(){},mounted:function(){},watch:{myallroute:{handler:function(e,t){console.log(e,420141)}},$route:{handler:function(e,t){}}}},Object(r["a"])(i,"watch",{}),Object(r["a"])(i,"methods",{quc:function(e){for(var t=[],a={},i=0;i<e.length;i++)a[e[i].name]||(t.push(e[i]),a[e[i].name]=!0);return t},topath:function(e){this.$router.push(e.path)},deleroute:function(e,t){var a=this.quc(this.$store.getters.userRole);a.splice(t,1);this.$store.commit("SET_ROLES",a)}}),i),u=c,d=(a("5d88"),a("4ac2")),m=Object(d["a"])(u,n,s,!1,null,"4cf6632b",null);t["default"]=m.exports},"16d4":function(e,t,a){},"16e4":function(e,t,a){"use strict";a("f998")},"1b9e":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("6dbb"),a("e0e8");function i(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(a){var i,n,s,r,o,l,c,u="",d=0;a=t(a);while(d<a.length)i=a.charCodeAt(d++),n=a.charCodeAt(d++),s=a.charCodeAt(d++),r=i>>2,o=(3&i)<<4|n>>4,l=(15&n)<<2|s>>6,c=63&s,isNaN(n)?l=c=64:isNaN(s)&&(c=64),u=u+e.charAt(r)+e.charAt(o)+e.charAt(l)+e.charAt(c);return u},this.decode=function(t){var i,n,s,r,o,l,c,u="",d=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(d<t.length)r=e.indexOf(t.charAt(d++)),o=e.indexOf(t.charAt(d++)),l=e.indexOf(t.charAt(d++)),c=e.indexOf(t.charAt(d++)),i=r<<2|o>>4,n=(15&o)<<4|l>>2,s=(3&l)<<6|c,u+=String.fromCharCode(i),64!=l&&(u+=String.fromCharCode(n)),64!=c&&(u+=String.fromCharCode(s));return u=a(u),u};var t=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",a=0;a<e.length;a++){var i=e.charCodeAt(a);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t},a=function(e){var t="",a=0,i=c1=c2=0;while(a<e.length)i=e.charCodeAt(a),i<128?(t+=String.fromCharCode(i),a++):i>191&&i<224?(c2=e.charCodeAt(a+1),t+=String.fromCharCode((31&i)<<6|63&c2),a+=2):(c2=e.charCodeAt(a+1),c3=e.charCodeAt(a+2),t+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),a+=3);return t}}},"1dfb":function(e,t,a){"use strict";(function(e){var i=a("02df");t["a"]={data:function(){var e=function(e,t,a){if(""===t)return a(new Error("请选择"));a()};return{query:{name:"",pageSize:20,page:1},typeTotal:0,constQuery:{pageSize:20,page:1,typeId:""},constTotal:0,FtypeTabData:[],FconstTabData:[],typeTabData:[],typeLoading:!1,constLoading:!1,constTabData:[],typedialogform:!1,subBtnTypeLonging:!1,isTypeAction:"",infoTypeForm:{name:"",code:""},isAction:"",dialogform:!1,infoForm:{name:"",pId:"",typeId:"",val:"",descr:""},rules:{typeId:[{required:!0,validator:e,trigger:"change"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],val:[{required:!0,message:"请输入常量值",trigger:"blur"}],code:[{required:!0,message:"请输入类型编码",trigger:"blur"}]}}},watch:{dialogform:function(e,t){e&&this.getFromData()}},created:function(){this.getTypeTab(),this.getConstTab()},mounted:function(){},methods:{getFromData:function(){var e=this;this.$fetchGet("constTypes",{pageSize:1e3,page:1}).then((function(t){e.FtypeTabData=t.list})),this.$fetchGet("constDicts",{pageSize:1e3,page:1}).then((function(t){e.FconstTabData=t.list}))},getTypeTab:function(){var e=this;this.typeLoading=!0,this.$fetchGet("constTypes",this.query).then((function(t){e.typeTabData=t,e.typeTotal=t.length,e.typeLoading=!1}))},getConstTab:function(){var e=this;this.constLoading=!0,this.$fetchGet("constDicts",this.constQuery).then((function(t){e.constTabData=t.list,e.constTotal=t.total,e.constLoading=!1}))},addTypeBtn:function(){this.isTypeAction="add",this.typedialogform=!0},updateTypeBtn:function(t){var a=this;this.isTypeAction="update",e.each(this.infoTypeForm,(function(e,i){a.infoTypeForm[e]=t[e]})),this.infoTypeForm.id=t.id,this.typedialogform=!0},deleteTypeBtn:function(e){var t=this;this.$confirm("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$fetchDelete("constTypes/id/"+e.id).then((function(e){1===e&&(t.getTypeTab(),t.Gsuccess("删除成功！"))})).catch((function(e){t.Gerror(e)}))}))},subType:Object(i["a"])((function(){var e=this;this.$refs.infoTypeForm.validate((function(t){t&&(e.subBtnTypeLonging=!0,"add"==e.isTypeAction?e.$fetchPost("constTypes/save",e.infoTypeForm).then((function(t){e.Gsuccess("添加成功"),e.getTypeTab(),e.typedialogform=!1,e.subBtnTypeLonging=!1})).catch((function(t){e.Gerror(t)})):"update"==e.isTypeAction&&e.$fetchPut("constTypes/update",e.infoTypeForm).then((function(t){e.Gsuccess("更新成功"),e.getTypeTab(),e.typedialogform=!1,e.subBtnTypeLonging=!1})).catch((function(t){e.Gerror(t)})))}))}),300),addBtn:function(){this.isAction="add",this.dialogform=!0},updateBtn:function(t){var a=this;this.isAction="update",e.each(this.infoForm,(function(e,i){a.infoForm[e]=t[e]})),this.infoForm.id=t.id,this.dialogform=!0},deleteBtn:function(e){var t=this;this.$confirm("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$fetchDelete("constDicts/deleteById/"+e.id).then((function(e){1===e&&(t.getConstTab(),t.Gsuccess("删除成功！"))})).catch((function(e){t.Gerror(e)}))}))},subBtn:Object(i["a"])((function(){var e=this;this.$refs.infoForm.validate((function(t){t&&("add"===e.isAction?e.$fetchPost("constDicts/save",e.infoForm).then((function(t){e.Gsuccess("添加成功"),e.getConstTab(),e.dialogform=!1,e.subBtnTypeLonging=!1})).catch((function(t){e.Gerror(t)})):"update"===e.isAction&&e.$fetchPut("constDicts/update",e.infoForm).then((function(t){e.Gsuccess("更新成功"),e.getConstTab(),e.dialogform=!1,e.subBtnTypeLonging=!1})).catch((function(t){e.Gerror(t)})))}))}),300),emptyForm:function(){this.infoForm={typeId:"",name:"",pId:"",val:"",descr:""},this.$refs.infoForm.resetFields(),this.subBtnTypeLonging=!1},emptyTypeForm:function(){this.infoTypeForm={name:"",code:""},this.$refs.infoTypeForm.resetFields(),this.subBtnTypeLonging=!1},allConst:function(){this.constQuery.typeId="",this.getConstTab()},selecttypeRow:function(e){this.constQuery.typeId=e.id,this.getConstTab()},typeSizeChange:function(e){this.query.pageSize=e,this.getTypeTab()},typeCurrentChange:function(e){this.query.page=e,this.getTypeTab()},constSizeChange:function(e){this.constQuery.pageSize=e,this.getConstTab()},constCurrentChange:function(e){this.constQuery.page=e,this.getConstTab()}}}}).call(this,a("c65b"))},"1edf":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTRGNjFDQkMxRTYxMUVCQjI0QzkwQUNDREEzQzcyQSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTRGNjFDQ0MxRTYxMUVCQjI0QzkwQUNDREEzQzcyQSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1NEY2MUM5QzFFNjExRUJCMjRDOTBBQ0NEQTNDNzJBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1NEY2MUNBQzFFNjExRUJCMjRDOTBBQ0NEQTNDNzJBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+e6RZhwAAAYJJREFUeNqk1EsoRFEcx/EzQ4SQlKmRyEaz8X4syZpRNKSYFTsWUnZ2JBayI0uxUJTCSkoiJBSJROxYWFBSo8b1PfU/dU1qzlz/+nTPPPrNf87L1z/thJRSy6jFJfpwpSxraez363SsoAbHaMIapiyy3nCCZ/ebPjp0eJ6iEXtoVvYVxzxG6fTLdHiBBhxJh3eWHRZgEEPIwoDp8D9zmI1DVCNEl7d+Bjeogx5XpbIg1CfmZNyiJMSUo7zVhzwzEwO9VlSe52ZR3KUnN2AZFMQwwtjHgTuwROYi/MePJCu95SIsiGMCg7JlinEmX4hZBMWkq23Cvt0nZVLCxjGR6gQmHj29KB14lOB/l192/JPHbROIzqjCxMB71EuwbZXJZfKCV0I3kW8CF5GLDZRbBq7Lud+RBW3DglmUWfmwCw94TxLmQx620C5NXaPTBOorKIJu9MqeTEsSWCmhepwhByLu3th6QVaFTe2iVS6SHJSav+z1LPfIPFagSC7ZEf3BjwADAOCGWaH5OQs/AAAAAElFTkSuQmCC"},2:function(e,t){},2017:function(e,t,a){"use strict";a("34fd")},"21b6":function(e,t,a){"use strict";a("7f0d"),a("dd8d"),a("9e79"),a("9113"),a("a573"),a("1e1b");var i=a("b1d0"),n=a("a18c"),s=(a("c276"),a("70c3")),r=",\n";function o(e,t){var a=[];return t.map((function(i){i.pid===e&&(-1!=r.indexOf(i.url+",")&&""!==i.url||(i.url="/error"),a.push(i),i.children=o(i.id,t))})),a}function l(e){var t,a=[];return e.forEach((function(e){t={},e.children&&e.children.length&&(t.children=l(e.children)),"/error"===e.url?(t.path="/error",t.component=s("errorPage/index")):(t.path=e.url,t.component=s(e.url.slice(1)+"/index")),t.name=e.name,a.push(t)})),a}var c={state:{menuData:[],routers:n["b"],addRouters:[]},mutations:{SET_MENU:function(e,t){e.menuData=t},SET_ROUTERS:function(e,t){e.addRouters=t,e.routers=n["b"].concat(t)}},actions:{GenerateRoutes:function(e){var t=e.commit;e.state;return new Promise((function(e,a){Object(i["b"])("auths/menu").then((function(a){if(a){var i=o(1e3,a.slice(0));n["a"][0].children=l(i.slice(0));var s=n["a"];t("SET_MENU",i),t("SET_ROUTERS",s),e({menuData:i,routerData:s})}else e(1)}))}))}}};t["a"]=c},2257:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roadDistribution-box"},[a("div",{staticClass:"lkicon"},[e._m(0),a("div",{staticStyle:{"text-align":"left","margin-top":"0.4vh"}},[e._v(" 更新时间："+e._s(e.$moment().format("YYYY/M/D hh:mm:ss")))])])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-around"}},[e._v(" 畅通 "),a("div",{staticClass:"lk1"}),a("div",{staticClass:"lk1 lk2"}),a("div",{staticClass:"lk1 lk3"}),a("div",{staticClass:"lk1 lk4"}),e._v(" 拥堵 ")])}],s={components:{},data:function(){return{}},beforeCreate:function(){},created:function(){var e=this;setTimeout((function(){e.$store.commit("SET_LOADING",!1)}),1e3)},mounted:function(){},methods:{}},r=s,o=(a("3f03"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"39e5a8dd",null);t["default"]=l.exports},"253c":function(e,t,a){},"25ca":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNzA4MkExQkMxRTYxMUVCODg4NUZGMDNCQUMxQjM4NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNzA4MkExQ0MxRTYxMUVCODg4NUZGMDNCQUMxQjM4NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU3MDgyQTE5QzFFNjExRUI4ODg1RkYwM0JBQzFCMzg2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU3MDgyQTFBQzFFNjExRUI4ODg1RkYwM0JBQzFCMzg2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+BbJ7qwAAAgJJREFUeNqklM9LVFEUx5/hxogJRWwrbpLciG5Egv4CLREXkdMPhVoEhSCTFYMMUegQAw4EU6JjNa4acWTwDxgIXSmz0Rk37t0oWtQyv2f4vLgNr2fSgQ9n7rnnnHfn3HNuQ3T2l3eGvBc3xZp4VL/5Kfbn+kJIoltiQzwUV9Ab2P8qQQl7xKrIi1aR5XRZ1nn2e85KaKfIiJLoFynRJ8Y41RjrFPvml7mbrMX9lgbVMCk9IJpFRHwRs2I35J9dE8/EiDgRR6KoesbshLdFp7hMont1ye6Lb2hfdvFLEmfxd/y/vIrTd/FSrIhuJ/iquIT2pRu/F8R5rGsJ9zE8FWlxg/q8E21iUeTQbdhL+KWJ8/w87qVYLSZxLIpxsUVJougt7EX8JokLbZsdMcrNVkVC/ERXsY/i9099+F8SlLCLmhW4vWnRhO7EnsMvNKH14FsKbn25IHrFOpOyznqB/RL+ETdho2jn9xw9ZQV/JcrYJ8QgvfdcPBbzIi6eiGP82v0TDmOwXnvNuux8dI+b3HNsZfzeEOf5eSzhZ1HhSzZOHxktX5Y4+VLd6JlfjLgKeWqz7D4OCUboBwEz4tBJ1CKmGLuLYtkuSzN84D4OQc9XnMJb938lkSW+LjqcOm/XP7CNATe/LYZoYHN/4OxtYiucpw99KfDufRAH6P6wZCanAgwAcJ2AS8MTtS0AAAAASUVORK5CYII="},"25d6":function(e,t,a){},2629:function(e,t,a){},"26b0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"systembox"},[a("router-view")],1)},n=[],s={},r=s,o=(a("03f3"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"40ae4213",null);t["default"]=l.exports},"27b4":function(e,t,a){"use strict";a("6c91")},"27c5":function(e,t,a){"use strict";a("b06f")},28188:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contentPage"},[a("div",{staticClass:"contentBorder"},[a("div",{staticClass:"topAdd"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.allAuth}},[e._v("查看所有")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addAuth}},[e._v("添加权限")])],1),a("el-row",{staticClass:"authcontent"},[a("el-col",{staticClass:"authTree",attrs:{span:5}},[a("div",[a("el-tree",{attrs:{data:e.authsTree,props:e.defaultProps,accordion:""},on:{"node-click":e.authsTreeNodeClick}})],1)]),a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.tabLoading,expression:"tabLoading"}],staticClass:"authTab",attrs:{span:19,"element-loading-text":"拼命加载中"}},[a("div",[a("el-table",{staticClass:"pageTable",staticStyle:{width:"100%"},attrs:{data:e.authTab,height:e.$store.getters.docHeight-35}},[a("el-table-column",{attrs:{resizable:!1,fixed:"",type:"index",width:"60",label:"序号",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,fixed:"",prop:"name",label:"资源名称","min-width":"180",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"type",label:"资源类型",formatter:e.Ftype,width:"100",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"code",label:"权限编码","min-width":"160",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"url",label:"访问url地址","min-width":"150",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"parentname",label:"父节点","min-width":"160",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"descr",label:"描述","min-width":"200",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.updateAuth(t.row)}}},[e._v("更新")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteAuth(t.row)}}},[e._v("删除")])]}}])})],1)],1)])],1),a("div",{staticClass:"tabbottom"},[a("el-pagination",{attrs:{background:"","current-page":e.query.page,"page-sizes":[10,20,50,100],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"权限信息",visible:e.dialogform,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{close:e.emptyForm,"update:visible":function(t){e.dialogform=t}}},[a("el-form",{ref:"authForm",attrs:{model:e.authForm,rules:e.rules,"label-width":"80px","label-position":"right"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"权限名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入权限名称"},model:{value:e.authForm.name,callback:function(t){e.$set(e.authForm,"name",t)},expression:"authForm.name"}})],1)],1)]),a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"资源类型",prop:"type"}},[a("el-select",{model:{value:e.authForm.type,callback:function(t){e.$set(e.authForm,"type",t)},expression:"authForm.type"}},[a("el-option",{attrs:{label:"菜单",value:"1"}}),a("el-option",{attrs:{label:"方法",value:"3"}})],1)],1)],1)])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"3"===e.authForm.type,expression:"authForm.type === '3'"}],attrs:{label:"权限编码"}},[a("el-input",{attrs:{placeholder:"请输入权限编码"},model:{value:e.authForm.code,callback:function(t){e.$set(e.authForm,"code",t)},expression:"authForm.code"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.authForm.type,expression:"authForm.type === '1'"}],attrs:{label:"url地址",prop:"url"}},[a("el-input",{attrs:{placeholder:"格式/xxxx"},model:{value:e.authForm.url,callback:function(t){e.$set(e.authForm,"url",t)},expression:"authForm.url"}})],1)],1)]),a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"上传图标"}},[a("el-input",{attrs:{placeholder:"格式el-icon-fa-hand-o-right"},model:{value:e.authForm.props,callback:function(t){e.$set(e.authForm,"props",t)},expression:"authForm.props"}})],1)],1)])],1),"update"!==e.isAction?a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"父节点"}},[a("el-cascader",{attrs:{options:e.parentData,props:e.defaultProps,"change-on-select":"",clearable:"","show-all-levels":!1},on:{change:e.selectparent},model:{value:e.parent,callback:function(t){e.parent=t},expression:"parent"}})],1)],1)]),a("el-col",{attrs:{span:7}},[a("div",[a("el-form-item",{attrs:{label:"插入节点"}},[a("el-select",{attrs:{placeholder:"请选择插入节点名称",clearable:""},on:{change:e.selectSon},model:{value:e.thisSon,callback:function(t){e.thisSon=t},expression:"thisSon"}},e._l(e.sonData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id+","+e.sort}})})),1)],1)],1)]),a("el-col",{attrs:{span:5}},[a("div",{staticStyle:{"line-height":"34px"}},[a("el-radio-group",{model:{value:e.authForm.insertType,callback:function(t){e.$set(e.authForm,"insertType",t)},expression:"authForm.insertType"}},[a("el-radio",{attrs:{label:1}},[e._v("之前")]),a("el-radio",{attrs:{label:2}},[e._v("之后")])],1)],1)])],1):e._e(),a("el-form-item",{attrs:{label:"描述",prop:"descr"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入描述"},model:{value:e.authForm.descr,callback:function(t){e.$set(e.authForm,"descr",t)},expression:"authForm.descr"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogform=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.subBtnLonging},on:{click:e.subForm}},[e._v("确 定")])],1)],1)],1)},n=[],s=a("034e"),r=s["a"],o=(a("9928"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"f750aa4a",null);t["default"]=l.exports},"2f3e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"containererrPage"},[a("div",{staticClass:"errPage-container"},[a("el-button",{staticClass:"pan-back-btn",attrs:{icon:"arrow-left"},on:{click:e.back}},[e._v("返回")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("h1",{staticClass:"text-jumbo text-ginormous"},[e._v("Oops!")]),a("h2",[e._v("该页面正在开发中，敬请期待")]),a("h6"),a("ul",{staticClass:"list-unstyled"},[a("li",[e._v("或者你可以去:")]),a("li",{staticClass:"link-type"},[a("router-link",{attrs:{to:"/clean/home"}},[e._v("首页")])],1)])]),a("el-col",{attrs:{span:12}})],1)],1)])},n=[],s=a("c546"),r=s["a"],o=(a("0312"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"45effa32",null);t["default"]=l.exports},3:function(e,t){},"30a9":function(e,t,a){"use strict";a("253c")},"34fd":function(e,t,a){},3963:function(e,t,a){},"3d70":function(e,t,a){"use strict";a("d6e4")},"3f03":function(e,t,a){"use strict";a("a854")},4:function(e,t){},4170:function(e,t,a){},4396:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"passengerCorridor-box"},[a("div",{staticClass:"leftlinemsg"},[e._m(0),a("div",{staticClass:"zhandian-box"},e._l(e.lineData,(function(t,i){return a("div",{key:i,staticClass:"zhandian"},[a("div",{staticClass:"zhnadiason",staticStyle:{"margin-right":"0.2vw"}},[e._v(e._s(t.name))]),a("div",{staticClass:"zhnadiason zhnadiason1"},e._l(t.station,(function(t,i){return a("div",{key:i,staticClass:"zhnadiasonla"},[e._v(" "+e._s(t.name)+" ")])})),0)])})),0)]),a("div",{staticClass:"leftlinemsg leftlinemsg1"},[e._m(1),a("div",{staticClass:"zhandian-box"},e._l(e.lineData,(function(t,i){return a("div",{key:i,staticClass:"zhandian"},[a("div",{staticClass:"zhnadiason",staticStyle:{"margin-right":"0.2vw"}},[e._v(e._s(t.name))]),a("div",{staticClass:"zhnadiason zhnadiason1"},e._l(t.station,(function(t,i){return a("div",{key:i,staticClass:"zhnadiasonla"},[e._v(" "+e._s(t.name)+" ")])})),0)])})),0)]),e._m(2)])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tit-line"},[a("div",{staticStyle:{"margin-right":"0.2vw"}},[e._v("途径公交线路")]),a("div",[e._v("站点")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tit-line"},[a("div",{staticStyle:{"margin-right":"0.2vw"}},[e._v("途径轨交线路")]),a("div",[e._v("站点")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"lkicon"},[i("div",{staticClass:"lkicon-box"},[i("div",{staticClass:"lkicon-itam"},[i("img",{staticStyle:{"margin-right":"0.4vw"},attrs:{src:a("ea79")}}),e._v(" 公交站点 ")]),i("div",{staticClass:"lkicon-itam"},[i("img",{staticStyle:{"margin-right":"0.4vw"},attrs:{src:a("4552")}}),e._v(" 轨交站点 ")])])])}],s=(a("9e79"),{components:{},data:function(){return{lineData:[{name:"81路",station:[{name:"昌邑路桃林路"},{name:"通耀路耀龙路"},{name:"金苏路新金桥路"},{name:"小路"}]},{name:"上川专线",station:[{name:"老北门"},{name:"真南路"}]},{name:"上川专线",station:[{name:"老北门"},{name:"真南路"}]}],kyline:[121.519582,31.244213,121.519504,31.241951,121.519706,31.240515,121.520005,31.239596,121.520566,31.238437,121.522564,31.234565,121.524342,31.231122,121.525827,31.227642,121.527369,31.223936,121.5288,31.220249,121.529217,31.218594,121.529336,31.216774,121.529217,31.21494,121.528592,31.213133,121.527758,31.211611,121.52685,31.209842,121.525213,31.206825,121.523456,31.203604,121.521253,31.199657,121.518743,31.194945,121.516408,31.192784,121.513805,31.191212,121.510819,31.189607]}},beforeCreate:function(){},created:function(){var e=this;setTimeout((function(){e.$store.commit("SET_LOADING",!1)}),2e3),console.log(this.separateArr(this.kyline,2)),this.getData()},mounted:function(){},methods:{getData:function(){this.$fetchGet("indicator/corridor").then((function(e){}))},separateArr:function(e,t){for(var a=e.length,i=a%t===0?a/t:Math.floor(a/t+1),n=[],s=0;s<i;s++){var r=e.slice(s*t,s*t+t);n.push(r)}return n}}}),r=s,o=(a("05451"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"ed9f5002",null);t["default"]=l.exports},4552:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFRTdDNkFBQkM0RjgxMUVCOEU4N0JEODJFQjZGMTQyMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFRTdDNkFBQ0M0RjgxMUVCOEU4N0JEODJFQjZGMTQyMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkVFN0M2QUE5QzRGODExRUI4RTg3QkQ4MkVCNkYxNDIwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkVFN0M2QUFBQzRGODExRUI4RTg3QkQ4MkVCNkYxNDIwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HbTE8QAAA2BJREFUeNq0Vl0opFEYfkYb5f+GTcSF37IXLlwsIYqJEDcsrVKkFCPDjRQS9oYyadoQEjbJFcqNf/KzJJGwxIXkv8Sw8pPZ793X7Gfmm/nMXsxTZ7533u985znnPe/znqPQ6/VQKBTBAL4IzRG2wW+hDQhcvxSC8cnZ2fmnSqVydHNzswnb9fU1tFrtnU6n+0z/v1VVVeltDeIgLjvhx93Lywu2xiuH+werv9jdBYaHgYUFYHsbuLkBaAsCA4HoaCAtjW0r8F2A5Vicnen1hYVCauH9lpen15+emh2GOIjLTnYqi4tASAjQ2mpdFLq6gKAgYH7eYhfLIV1dBSIjjX2enkBKChAeDri6clip38gIcH7OfcgXFcWhj4iwkvDuDoiJMfaVlwO1tYCTkxmVCTKrqQGamkRfbCxweQm4uBh1NR/SsjIexICODh7MHBnBUagXjY1Ab6/oe3wEioslXaWER0dAe7v4v7ISyM9ne2zMeCKEpSXg6ortnBygulp819MDHBy8Q9jf/1Y8QEMD2+vrgFIJJCWJ72m/aJ8SE0Wfadjr698hnJkR7dxcfj48APHxbM/OAkVFLITMTPYtLwMVFeJ33d1AVhaQkQEEBLyjQz8/UVdra+xTKqWa8/eX+lpaLMrZoENplup0ol1aykPRqkyxvy/1lZQAExOAvT2EIwh4eWH5dHbKyMLBwXx4CVot8PQEqNWijxJsb4+zlDA0JJ2ILGGwcDSenEg/Uql47wikLcreujqgoIB9KyvA9PTrqMKwz89sm+hZStjXx2GkldKHlDCnp0BYmNiHZJKdzfozYGqKq4u7O5CQABwfiwVANku9vZmEQnd7C3h4GJO9FbspqBQeHvIEDaCJyRLS6kgOROzry6scH7eueM/NsU4pWQjJyVz8ZQkpuwYGjH0UIo1Gnqy5WVp/29qsLN60OipjRGQAZSZlW3o6EBrKiXN/D2xsAIODwM6O8Rh0gtA4Vh9PVFlGR/k4MoRoc5ObHOzs+GZA4TT3WvZj2g+6TqSmWreH1G9ryyKZ/AoNoBOcZkwao+fkpHgC0GroHhMXx5Ew3UMLhBcn5oRuCtKTiab+B68cF/8uwmq12tHHx8cmV8Qj4YzVaDR/L8KKN1f9r0L7aKNr6ZnQftBV/48AAwCo5Alr9G39uQAAAABJRU5ErkJggg=="},4738:function(e,t,a){},"4f07":function(e,t,a){"use strict";(function(e){a("dd8d"),a("a573"),a("5cb1"),a("74e1");var i=a("02df");a("effe"),a("ea2d");t["a"]={data:function(){return{isAction:"",query:{page:1,pageSize:20,name:""},tabLoading:!1,roleTabData:[],total:0,dialogFormVisible:!1,dialogform:!1,addForm:{id:"",name:"",code:"",descr:"",authIds:""},treeData:[],selectId:[],subBtnLonging:!1,rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10个字符",trigger:"blur"}],code:[{required:!0,message:"请输入角色编码",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20个字符",trigger:"blur"}],descr:[{required:!1,message:"请输入描述内容",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100个字符",trigger:"blur"}]}}},watch:{dialogFormVisible:function(e,t){var a=this;e&&a.$nextTick((function(){a.initzTree(a.selectId)}))}},created:function(){this.getAuthsTree()},mounted:function(){this.getRoleTab()},methods:{getRoleTab:function(){var e=this;this.tabLoading=!0,this.$fetchGet("roles",this.query).then((function(t){e.tabLoading=!1,e.roleTabData=t.list,e.total=t.total}))},addrole:function(){this.dialogFormVisible=!0,this.isAction="add"},check:function(e){var t=this;this.$fetchGet("auths/roleId/"+e.id).then((function(e){e&&e.length>0&&e.forEach((function(e){e.url="/repairSystem/#"+e.url})),t.dialogform=!0,t.isAction="look",t.$nextTick((function(){this.menuTree(e)}))}))},updateAuth:function(t){var a=this;this.$fetchGet("auths/roleId/"+t.id).then((function(i){var n=[],s=[];e.each(a.treeData,(function(t,a){a.ranges="diffent",e.each(i,(function(e,t){a.id==t.id&&(n.push(t.id),a.ranges=t.ranges,t.ranges?s.push("".concat(t.id,"#").concat(t.ranges)):s.push(t.id))}))})),a.selectId=n,e.each(a.addForm,(function(e,i){a.addForm[e]=t[e]+""})),a.addForm.authIds=s,a.isAction="update",a.dialogFormVisible=!0,a.addForm.id=t.id}))},deleteAuth:function(e){var t=this;this.$confirm("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$fetchDelete("roles/delete/"+e.id).then((function(e){1==e?(t.Gsuccess("删除成功！"),t.getRoleTab()):t.Gerror("删除失败！")}))}))},subForm:Object(i["a"])((function(){var e=this;this.$refs.addForm.validate((function(t){if(t){var a=e.cloneObj(e.addForm);if(e.addForm.authIds?a.authIds=e.addForm.authIds.join(","):a.authIds,""==a.authIds)return void e.Gwarning("权限不能为空!");e.subBtnLonging=!0,"add"===e.isAction?e.$fetchPost("roles",a).then((function(t){t?(e.Gsuccess("添加成功"),e.dialogFormVisible=!1,e.getRoleTab()):e.Gerror(t.message),e.subBtnLonging=!1})):"update"===e.isAction&&e.$fetchPut("roles",a).then((function(t){t?(e.Gsuccess("更新成功"),e.dialogFormVisible=!1,e.getRoleTab()):e.Gerror(t.message),e.subBtnLonging=!1}))}}))}),300),emptyForm:function(){this.addForm={name:"",code:"",descr:"",authIds:""},this.$refs.addForm.resetFields()},getAuthsTree:function(){var e=this;this.$fetchGet("auths/authsTree").then((function(t){e.treeData=t}))},menuTree:function(t){var a="_a",i={edit:{drag:{isCopy:!1,isMove:!0},enable:!1},view:{addDiyDom:n},check:{enable:!1},data:{keep:{leaf:!0,parent:!0},simpleData:{open:!0,enable:!0,idKey:"id",pIdKey:"pid"},key:{name:"name"}}};function n(t,i){if(!i.parentNode||2==i.parentNode.id){var n=e("#"+i.tId+a);if(i.rangeName){var s="<select class='selDemo' id='"+i.id+"'><option value='r'>"+i.rangeName+"</option></select>";n.after(s)}}}var s=e.fn.zTree.init(e("#tree"),i,t);s.expandAll(!0)},initzTree:function(t){var a=this,i="_a",n={edit:{drag:{isCopy:!1,isMove:!0},removeTitle:"删除",renameTitle:"更新",enable:!1},view:{addDiyDom:s},check:{enable:!0,chkStyle:"checkbox",radioType:"all"},callback:{onCheck:r},data:{keep:{leaf:!0,parent:!0},simpleData:{open:!0,enable:!0,idKey:"id",pIdKey:"pid"},key:{name:"name",url:"href"}}};function s(t,n){if(!n.parentNode||2==n.parentNode.id){var s=e("#"+n.tId+i),o="";if("add"==a.isAction){if(o="",3==n.type&&1==n.setRange){o="<select class='selDemo' id='"+n.id+"'><option value='my-self'>限本人</option><option value='my-orga'>限所属部门</option><option value='all'>所有数据</option></select>",s.after(o);var l=e("#"+n.id);l&&l.bind("change",(function(){r(t,n)}))}}else if("update"==a.isAction)if(o="",3==n.type&&1==n.setRange&&"diffent"==n.ranges){o="<select class='selDemo' id='"+n.id+"'><option value='my-self'>限本人</option><option value='my-orga'>限所属部门</option><option value='all'>所有数据</option></select>",s.after(o);l=e("#"+n.id);l&&l.bind("change",(function(){r(t,n)}))}else if(3==n.type&&1==n.setRange&&"all"==n.ranges){o="<select class='selDemo' id='"+n.id+"'><option value='my-self'>限本人</option><option value='my-orga'>限所属部门</option><option value='all' selected=selectd>所有数据</option></select>",s.after(o);l=e("#"+n.id);l&&l.bind("change",(function(){r(t,n)}))}else if(3==n.type&&1==n.setRange&&"my-self"==n.ranges){o="<select class='selDemo' id='"+n.id+"'><option value='my-self' selected=selectd >限本人</option><option value='my-orga'>限所属部门</option><option value='all'>所有数据</option></select>",s.after(o);l=e("#"+n.id);l&&l.bind("change",(function(){r(t,n)}))}else if(3==n.type&&1==n.setRange&&"my-orga"==n.ranges){o="<select class='selDemo' id='"+n.id+"'><option value='my-self'  >限本人</option><option value='my-orga' selected=selectd>限所属部门</option><option value='all'>所有数据</option></select>",s.after(o);l=e("#"+n.id);l&&l.bind("change",(function(){r(t,n)}))}}}Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)};function r(t,i,n){var s=e.fn.zTree.getZTreeObj("roletree"),r=s.getCheckedNodes(!0),o=[];[];for(var l=0;l<r.length;l++)3==r[l].type&&e("#"+r[l].id).val()?o.push(r[l].id+"#"+e("#"+r[l].id).val()):o.push(r[l].id);a.addForm.authIds=o}var o,l=e.fn.zTree.init(e("#roletree"),n,a.treeData);0!=a.selectId.length&&e.each(a.selectId,(function(e,t){null!=t&&(o=l.getNodeByParam("id",t)),l.checkNode(o,!0,!1)}));l.expandAll(!0)},handleSizeChange:function(e){this.query.pageSize=e,this.getRoleTab()},handleCurrentChange:function(e){this.query.page=e,this.getRoleTab()}}}}).call(this,a("c65b"))},5:function(e,t){},"523f":function(e,t,a){"use strict";(function(e){var a={state:{docHeight:e(document).height()-180,menuFlag:!1},mutations:{SET_FLAG:function(e){e.menuFlag=!e.menuFlag},SET_HEIGHT:function(e,t){e.docHeight=t}}};t["a"]=a}).call(this,a("c65b"))},5351:function(e,t,a){"use strict";a.r(t);var i,n,s=a("4ac2"),r={},o=Object(s["a"])(r,i,n,!1,null,null,null);t["default"]=o.exports},"545f":function(e,t,a){"use strict";a("d0a0")},5480:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contentPage"},[a("div",{staticClass:"contentBorder"},[a("div",{staticClass:"topAdd"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.allAuth}},[e._v("查看所有")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addAuth}},[e._v("添加组织")])],1),a("el-row",{staticClass:"authcontent"},[a("el-col",{staticClass:"authTree",attrs:{span:5}},[a("div",[a("el-tree",{attrs:{data:e.authsTree,props:e.defaultProps,"default-expand-all":"",accordion:""},on:{"node-click":e.authsTreeNodeClick}})],1)]),a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.tabLoading,expression:"tabLoading"}],staticClass:"authTab",attrs:{span:19,"element-loading-text":"拼命加载中"}},[a("div",{staticStyle:{"box-sizing":"border-box",padding:"8px",background:"#ffffff"}},[a("el-table",{staticClass:"pageTable",staticStyle:{width:"100%"},attrs:{data:e.authTab,stripe:"",border:"",height:e.$store.getters.docHeight-35}},[a("el-table-column",{attrs:{resizable:!1,fixed:"",type:"index",width:"60",label:"序号",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,fixed:"",prop:"name",label:"组织名称",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"parentName",label:"上级组织",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.updateAuth(t.row)}}},[e._v("更新")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteAuth(t.row)}}},[e._v("删除")])]}}])})],1)],1)])],1),a("div",{staticClass:"tabbottom"},[a("el-pagination",{attrs:{background:"","current-page":e.query.page,"page-sizes":[10,20,50,100],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"组织信息",visible:e.dialogform,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{close:e.emptyForm,"update:visible":function(t){e.dialogform=t}}},[a("el-form",{ref:"authForm",attrs:{model:e.authForm,rules:e.rules,"label-width":"80px","label-position":"right"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"组织名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入组织名称"},model:{value:e.authForm.name,callback:function(t){e.$set(e.authForm,"name",t)},expression:"authForm.name"}})],1)],1)])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"上级组织",prop:"parent"}},[a("el-cascader",{attrs:{options:e.authsTree,props:e.defaultProps,"change-on-select":"","show-all-levels":!1},model:{value:e.parent,callback:function(t){e.parent=t},expression:"parent"}})],1)],1)]),a("el-col",{attrs:{span:12}},[a("div")])],1),a("el-row")],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogform=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.subBtnLonging},on:{click:e.subForm}},[e._v("确 定")])],1)],1)],1)},n=[],s=a("da5c"),r=s["a"],o=(a("27c5"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"6e0ab62c",null);t["default"]=l.exports},"54f1":function(e,t,a){"use strict";(function(e){var i=a("e7e7"),n=(a("5cb1"),a("dd8d"),a("9e79"),a("9113"),a("7f0d"),a("6dbb"),a("e116"),a("5c04"),a("a573"),a("d84b"),a("02df"));a("effe"),a("ea2d");t["a"]={data:function(){var e=function(e,t,a){var i=/^[1][2,3,4,5,7,8][0-9]{9}$/;if(!t)return a(new Error("联系方式不能为空"));i.test(t)?a():a(new Error("联系方式为11位整数值"))};return{userStatus:[{label:"有效",value:1},{label:"冻结",value:2}],userFstatus:["","有效","冻结"],isAction:"",query:{page:1,pageSize:20},tabLoading:!1,roleTabData:[],total:0,dialogFormVisible:!1,dialogform:!1,addForm:{id:"",userName:"",realName:"",orgIds:"",roleIds:"",userTel:""},subBtnLonging:!1,roleAllotTab:[],thisRow:{},originTree:[],roleForm:{userId:"",orgId:"",roleId:""},allRole:[],parent:[],defaultProps:{label:"name",children:"children",value:"id"},isShowForm:!1,rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15个字符",trigger:"blur"}],realName:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15个字符",trigger:"blur"}],userTel:[{required:!0,message:"请输入联系方式(11位)",trigger:"blur"},{validator:e,trigger:"blur"}],roleId1:[{required:!0,message:"请选择角色",trigger:"change"}]}}},created:function(){this.getorgsTree(),this.getAllRole()},mounted:function(){this.getRoleTab()},methods:{selectRoles:function(e){this.$forceUpdate(),this.addForm.roleIds=e.join(","),this.roleForm.roleIds=e.join(",")},getAllRole:function(){var e=this;this.$fetchGet("roles/idAndName").then((function(t){e.allRole=t}))},getorgsTree:function(){var e=this;this.$fetchGet("orgs/getTree").then((function(t){t.forEach((function(e){e.pid||(e.pid=0)}));var a=e.parseChildren(0,t.slice(0));e.deleteChildren(a),e.originTree=a}))},searchName:function(){this.query.page=1,this.query.userName||(this.query={page:this.query.page,pageSize:this.query.pageSize}),this.getRoleTab()},getRoleTab:function(){var e=this;this.tabLoading=!0,this.$fetchGet("users",this.query).then((function(t){e.tabLoading=!1,t.list&&t.list.length>0&&t.list.forEach((function(e){e.roleId1=[],e.roleNameList=[],e.orgs1=[],e.orgNameList=[],e.roles.forEach((function(t){e.roleId1.push(t.id),e.roleNameList.push(t.name)})),e.orgs.forEach((function(t){t.orgId=t.path.split(",").map(Number),e.orgs1.push(t.orgId),e.orgNameList.push(t.name)})),e.roleName=e.roleNameList&&e.roleNameList.length?e.roleNameList.join(","):"",e.orgName=e.orgNameList&&e.orgNameList.length?e.orgNameList.join(","):""})),e.roleTabData=t.list,e.total=t.total}))},getNewRole:function(){var e=this;this.$fetchGet("users/getRoleByUser/"+this.roleForm.userId).then((function(t){e.roleAllotTab=t}))},addRole:function(){var e=this;""!=this.roleForm.orgId?this.$refs.roleForm.validate((function(t){t&&e.$fetchPost("users/saveOrgAndRole",e.roleForm).then((function(t){1==t?(e.Gsuccess("添加成功"),e.getNewRole()):e.Gerror("添加失败",+t.message)}))})):this.Gwarning("角色组织不能为空")},deleteRole:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$fetchDelete("users/deleteOrgAndRole",{userId:e.userId,orgId:e.orgId,roleId:e.roleId}).then((function(e){1==e?(t.Gsuccess("删除成功"),t.getNewRole()):t.Gerror("删除失败",+e.message)}))}))},mainRole:function(e){var t=this;this.$fetchPut("roles/signMainOrg",{userId:e.userId,orgId:e.orgId,roleId:e.roleId}).then((function(e){0==e.status?(t.Gsuccess("更新成功"),t.getNewRole()):t.Gerror("更新失败",+e.message)}))},allocation:function(e){this.dialogform=!0,this.roleForm.userId=e.id,this.thisRow=e,this.roleAllotTab=e.roles},addrole:function(){this.dialogFormVisible=!0,this.isAction="add"},updateAuth:function(t){var a=this;this.parent=[],t.orgs.length&&t.orgs.forEach((function(e){a.parent.push(e.id)})),this.addForm.roleId1=[],e.each(this.addForm,(function(e,i){a.addForm[e]=t[e]})),this.isAction="update",this.dialogFormVisible=!0,this.addForm.id=t.id,this.addForm.roleIds=t.roleId1.join(","),this.addForm.roleId1=t.roleId1,this.parent?this.addForm.orgIds=this.parent.join(","):this.addForm.orgIds=""},cancelBtn:function(e){var t=this;this.$confirm("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$fetchDelete("users/id/"+e.id).then((function(e){1==e?(t.Gsuccess("删除成功！"),t.getRoleTab()):t.Gerror("删除失败！")}))}))},freezeBtn:function(e){var t=this;this.$confirm("确认冻结？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$fetchPut("users/freezeUser/"+e.id).then((function(e){"success"==e?(t.Gsuccess("冻结成功！"),t.getRoleTab()):t.Gerror("冻结失败！")}))}))},subForm:Object(n["a"])((function(){var e=this;this.$refs.addForm.validate((function(t){if(t){var a=e.cloneObj(e.addForm);e.subBtnLonging=!0,"add"===e.isAction?e.$fetchPost("users",a).then((function(t){t?(e.Gsuccess("添加成功"),e.dialogFormVisible=!1,e.getRoleTab()):e.Gerror(t.message),e.subBtnLonging=!1})):"update"===e.isAction&&e.$fetchPut("users",a).then((function(t){t?(e.Gsuccess("更新成功"),e.dialogFormVisible=!1,e.getRoleTab()):e.Gerror(t.message),e.subBtnLonging=!1}))}}))}),300),emptyForm:function(){this.addForm={userName:"",realName:"",userTel:"",roleIds:"",roleId1:[],orgIds:""},this.parent=[],this.subBtnLonging=!1,this.$refs.addForm.resetFields()},emptyroleForm:function(){this.roleForm={userId:"",orgId:"",roleId:"",roleId1:[]},this.isShowForm&&(this.$refs.roleForm.resetFields(),this.isShowForm=!1)},selectOrg:function(e){var t=this.flatten(e),a=this.arr_unique4(t);this.addForm.orgIds=a.join(","),this.roleForm.orgIds=a.join(",")},flatten:function(e){var t,a=this;return(t=[]).concat.apply(t,Object(i["a"])(e.map((function(e){return Array.isArray(e)?a.flatten(e):e}))))},arr_unique4:function(e){var t=[];return e.forEach((function(e){t.includes(e)||t.push(e)})),t},handleSizeChange:function(e){this.query.pageSize=e,this.getRoleTab()},handleCurrentChange:function(e){this.query.page=e,this.getRoleTab()},Fstatus:function(e){return this.userFstatus[e.status]},parseChildren:function(t,a){var i=this,n=[];return e.each(a,(function(e,s){s.pid===t&&(n.push(s),s.children=i.parseChildren(s.id,a))})),n},deleteChildren:function(t){var a=this;e.each(t,(function(e,t){t.children&&t.children.length?a.deleteChildren(t.children):delete t.children}))}}}}).call(this,a("c65b"))},"56d7":function(e,t,a){"use strict";a.r(t);a("47f3"),a("c813"),a("f516"),a("0fdd");var i=a("a593"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],r={name:"app"},o=r,l=(a("5c0b"),a("4ac2")),c=Object(l["a"])(o,n,s,!1,null,null,null),u=c.exports,d=a("a18c"),m=a("2763"),h=a.n(m),p=(a("ccc1"),a("4170"),a("a47b")),f=(a("9113"),a("9e79"),a("c276"),a("38bc")),g=a.n(f);a("70e7");g.a.configure({showSpinner:!1}),d["c"].beforeEach((function(e,t,a){if(g.a.start(),"/login"!==e.path)if("/"!==e.path){a(),console.log("我在promise456"),p["a"].commit("SET_LOADING",!0);e.matched.slice(2)[0];0==p["a"].getters.userRole.length&&p["a"].getters.userRole.push(e.matched.slice(2)[0]),p["a"].getters.userRole.push(e.matched.slice(2)[0])}else a("/login");else a()})),d["c"].afterEach((function(e,t){g.a.done()}));var b=a("22e1"),v=(a("eee8"),a("6dbb"),a("ff25"),a("3f94"),a("9438"),a("4d28")),y=a.n(v),w=a("b1d0"),C={install:function(e,t){e.prototype.Gsuccess=function(e){m["Message"].success({message:e})},e.prototype.Gwarning=function(e){m["Message"].warning({message:e})},e.prototype.Gerror=function(e){m["Message"].error({message:e})},e.prototype.$echarts=y.a,e.prototype.$fetchGet=w["b"],e.prototype.$fetchPost=w["c"],e.prototype.$fetchPut=w["d"],e.prototype.$fetchDelete=w["a"],e.prototype.getBack=function(){this.$router.go(-1)},e.prototype.isContains=function(e){var t=localStorage.getItem("auth");return new RegExp(e,"g").test(t)},e.prototype.deletetimestamp=function(e){var t="",a=e.lastIndexOf("."),i=e.substring(0,a),n=e.substring(a,a.length);return i=i.substring(0,i.length-13),t=i+n,t},e.prototype.getCookie=function(e){var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?unescape(t[2]):null},e.prototype.cloneObj=function(e){var t,a=this,i=e.constructor===Array?[]:{};if("object"===Object(b["a"])(e)){if(window.JSON)t=JSON.stringify(e),i=JSON.parse(t);else for(var n in e)i[n]="object"===Object(b["a"])(e[n])?a.cloneObj(e[n]):e[n];return i}},e.filter("FormatTime",(function(e,t){if(e)return new Date(e).Format(t)})),e.filter("FormatSex",(function(e){return 0==e?"男":1==e?"女":void 0}))}},A=a("caaf"),F=a.n(A),k=a("a1c5"),x=a.n(k);i["default"].prototype.$moment=F.a,i["default"].use(x.a),i["default"].use(h.a),i["default"].use(C),i["default"].config.productionTip=!1,new i["default"]({router:d["c"],store:p["a"],render:function(e){return e(u)}}).$mount("#app")},"5a6b":function(e,t,a){},"5bd4":function(e,t,a){"use strict";a("84f8")},"5c0b":function(e,t,a){"use strict";a("d766")},"5d88":function(e,t,a){"use strict";a("b4b2")},6:function(e,t){},6117:function(e,t,a){"use strict";a("8f74")},"628a":function(e,t,a){"use strict";a("ecce")},6588:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lineCharacteristicsc",attrs:{id:"lineCharacteristics"}},[a("router-view",{on:{changefun:e.sonClick}})],1)},n=[],s=(a("9113"),a("55ae")),r=a("1222"),o=a("a3b6"),l=(a("1e1b"),a("ff25"),a("7f0d"),a("dd8d"),function(){function e(t){Object(r["a"])(this,e),Object.assign(this,this.data(t)),this.mounted()}return Object(o["a"])(e,[{key:"data",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return{el:e.el,mass:null,heatmap:null,polygonThree:null,overlayGroups:new AMap.OverlayGroup,overlayGroups1:new AMap.OverlayGroup,busLaneGroups:new AMap.OverlayGroup,kyLinedata:null,map:null,mapCenter:[121.460752,31.011182],mapLayers:[[new AMap.TileLayer],[new AMap.TileLayer.Satellite]],trafficLayer:null}}))},{key:"mounted",value:function(){this.initMap()}},{key:"initMap",value:function(){var e=this;this.map=new AMap.Map(this.el,{zoom:10,center:this.mapCenter,mapStyle:"amap://styles/d67717253a691e523956e9482ca38f1e",expandZoomRange:!0}),this.map.on("moveend",(function(){})),this.trafficLayer=new AMap.TileLayer.Traffic({zIndex:10}),this.map.plugin(["AMap.HeatMap"],(function(){e.heatmap=new AMap.HeatMap(e.map,{opacity:[0,.8],gradient:{.5:"#3EFF8F",.65:"#67E8FF",.7:"#1CD1FF",.9:"#FFEE0E",1:"#FF5E41"}})})),this.trafficLayer.setMap(this.map),this.isTraffic(!0),this.map.add(this.overlayGroups),this.map.add(this.overlayGroups1)}},{key:"setHeatemap",value:function(e){console.log(this.heatmap),this.heatmap.setDataSet({data:e,max:100})}},{key:"addPolygon",value:function(e){var t=this;this.polygonThree=new AMap.Polygon({path:e,fillColor:"red",strokeOpacity:1,fillOpacity:.5,strokeColor:"#144D95",strokeWeight:1,zIndex:200}),this.polygonThree.on("mouseover",(function(){t.polygonThree.setOptions({fillOpacity:.7,fillColor:"#7bccc4"})})),this.polygonThree.on("mouseout",(function(){t.polygonThree.setOptions({fillOpacity:.5,fillColor:"#ccebc5"})})),this.map.add(this.polygonThree)}},{key:"busLane",value:function(){}},{key:"passCorrline",value:function(e){this.kyLinedata=new AMap.Polyline({path:e,strokeColor:"#BE7322",strokeOpacity:1,strokeWeight:6,strokeStyle:"solid"}),this.map.add(this.kyLinedata)}},{key:"isTraffic",value:function(e){e?this.trafficLayer.show():this.trafficLayer.hide()}},{key:"isMass",value:function(e){e?this.mass.show():this.mass.hide()}},{key:"pointAll3",value:function(e,t){var i=[{url:a("c930"),anchor:new AMap.Pixel(6,6),size:new AMap.Size(11,11),zIndex:3}];this.mass=new AMap.MassMarks(e,{opacity:.8,zIndex:10,cursor:"pointer",style:i[0]});var n=new AMap.Marker({content:" ",map:this.map});this.mass.on("mouseover",(function(e){n.setPosition(e.data.lnglat),n.setLabel({content:"<div style='color:rgba(26, 66, 118, 1)'>".concat(e.data.stationName,"</div>")})})),this.mass.on("mouseout",(function(e){n.setPosition(e.data.lnglat),n.setLabel({content:null})})),this.mass.setMap(this.map)}},{key:"addOverlayGroup",value:function(e){this.overlayGroups.addOverlay(e)}},{key:"addOverlayGroup1",value:function(e){this.busLaneGroups.addOverlays(e)}},{key:"polylineBus",value:function(){var e=[];return data.forEach((function(t){if(t.longitude){var a=new AMap.Polyline({path:path,strokeColor:"#BE7322",strokeOpacity:1,strokeWeight:6,strokeStyle:"solid",zIndex:10});e.push(a)}})),e}},{key:"threeCircle",value:function(e,t){var a=this,i=[];return e.forEach((function(e){if(0!=e.longitude&&0!=e.latitude&&e.longitude!=e.latitude){var n,r=new AMap.Circle((n={center:[e.longitude,e.latitude],radius:t,borderWeight:1,strokeColor:"",strokeOpacity:1,strokeWeight:1,map:a.map},Object(s["a"])(n,"strokeOpacity",.1),Object(s["a"])(n,"fillOpacity",1),Object(s["a"])(n,"fillColor","rgba(23,145,252,0.1)"),Object(s["a"])(n,"zIndex",10),n));i.push(r)}})),i}}]),e}()),c=null,u={data:function(){return{number:[[[[121.619531,31.205242],[121.619498,31.205228],[121.619465,31.205242],[121.619451,31.205275],[121.619465,31.205308],[121.619498,31.205322],[121.619531,31.205308],[121.619545,31.205275],[121.619531,31.205242]]],[[[121.806966,31.148965],[121.806933,31.148951],[121.8069,31.148965],[121.806886,31.148998],[121.8069,31.149031],[121.806933,31.149045],[121.806966,31.149031],[121.80698,31.148998],[121.806966,31.148965]]]],shanghai:[[[[121.7789,31.3102],[121.7279,31.3548],[121.5723,31.4361],[121.5093,31.4898],[121.5624,31.4864],[121.5856,31.4547],[121.7694,31.3907],[121.796,31.3456],[121.7789,31.3102]]],[[[121.627,31.445],[121.5942,31.4586],[121.5758,31.4782],[121.6137,31.4713],[121.635,31.453],[121.627,31.445]]],[[[121.8018,31.357],[121.7939,31.3805],[121.8759,31.3642],[121.8882,31.3227],[121.8725,31.2968],[121.8406,31.2954],[121.8038,31.3284],[121.8018,31.357]]],[[[121.9752,31.617],[121.9917,31.4768],[121.918,31.4347],[121.8454,31.4319],[121.6088,31.5069],[121.4342,31.5903],[121.3955,31.5854],[121.3722,31.5532],[121.1453,31.7539],[121.1185,31.7591],[121.2003,31.8351],[121.3104,31.8725],[121.385,31.8335],[121.4315,31.7693],[121.4986,31.7533],[121.5933,31.7046],[121.9752,31.617]]],[[[121.1571,31.4114],[121.1462,31.4211],[121.1643,31.4272],[121.1643,31.4311],[121.1473,31.4439],[121.2304,31.4774],[121.2352,31.4931],[121.2594,31.4779],[121.3435,31.5121],[121.4054,31.4872],[121.5212,31.3948],[121.5989,31.3746],[121.7225,31.3035],[121.9627,31.0473],[121.9985,30.9],[121.994,30.8631],[121.9547,30.8258],[121.9697,30.7892],[121.9437,30.7771],[121.9045,30.8142],[121.6484,30.8162],[121.5172,30.7754],[121.3619,30.6795],[121.2747,30.6774],[121.2715,30.7327],[121.2355,30.7523],[121.218,30.785],[121.1747,30.772],[121.1178,30.7848],[121.1376,30.8262],[121.1177,30.8353],[121.1217,30.85],[121.067,30.8488],[121.0379,30.8139],[121.0144,30.8358],[120.9909,30.8227],[121.0219,30.8752],[120.9904,30.8956],[121.0046,30.9093],[120.9904,31.0138],[120.9522,31.0303],[120.9398,31.0094],[120.911,31.0106],[120.8946,31.0539],[120.9021,31.0857],[120.8569,31.105],[120.8813,31.1347],[121.0185,31.1341],[121.0408,31.1376],[121.0454,31.154],[121.0691,31.1487],[121.0625,31.2675],[121.0821,31.2715],[121.0888,31.2921],[121.0988,31.2763],[121.1054,31.2737],[121.1206,31.287],[121.1616,31.283],[121.1438,31.3097],[121.1299,31.3026],[121.1304,31.3442],[121.1068,31.3645],[121.1484,31.3854],[121.1571,31.4114]]],[[[121.9433,31.2155],[121.9573,31.2304],[122.0086,31.221],[121.9957,31.1608],[121.9596,31.1593],[121.9433,31.2155]]]]}},computed:{},watch:{"$store.getters.userStation":{handler:function(e,t){e&&(c.isTraffic(!1),c.pointAll3(e),console.log(this.$store.getters.threeMap),c.addPolygon(this.$store.getters.threeMap))}},"$store.getters.isbtn":{handler:function(e,t){}},$route:{handler:function(e,t){e&&this.judgeRoute(e)}}},created:function(){},mounted:function(){c=new l({el:"lineCharacteristics"});var e=this.$route;this.judgeRoute(e)},methods:{judgeRoute:function(e){switch(e.name){case"道路网":console.log("进到道路网"),c.isTraffic(!0),c.mass&&c.isMass(!1);break;case"公交站点":c.isTraffic(!1),c.mass&&c.isMass(!0);break;case"公交线路网":c.isTraffic(!1),c.mass&&c.isMass(!1);break;case"公交专用道":c.isTraffic(!1),c.mass&&c.isMass(!1),c.heatmap.hide();break;case"客运走廊":c.isTraffic(!1),c.mass&&c.isMass(!1),c.heatmap.hide();break;default:}},sonClick:function(e){if(console.log(e),1==e.ispoint?c.isMass(!0):2==e.ispoint&&c.isMass(!1),1==e.isheat)c.heatmap.hide();else if(2==e.isheat){var t=c.heatmap.getDataSet();t?c.heatmap.show():(console.log("判断"),c.setHeatemap(this.$store.getters.heatData))}}}},d=u,m=(a("cdca"),a("4ac2")),h=Object(m["a"])(d,i,n,!1,null,"5f8174ed",null);t["default"]=h.exports},6636:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"todo-list"},[e._v("待办事项")])},n=[],s={name:"todoList",data:function(){return{}},created:function(){},mounted:function(){},methods:{}},r=s,o=(a("6f01"),a("628a"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"7bad1dd7",null);t["default"]=l.exports},"6c91":function(e,t,a){},"6f01":function(e,t,a){"use strict";a("7b06")},"6fd2":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"treeleft"},e._l(e.menuData,(function(t,i){return a("el-dropdown",{key:t.id,on:{command:e.changemenu}},[a("div",{staticClass:"one-meanu"},[a("div",{class:e.meauindex==i?"fram-active":"framf"},[e._v(e._s(t.name))]),e.meauindex==i?a("div",{staticClass:"animate__animated animate__fadeInUp line-bor"}):e._e()]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(t.children,(function(t){return a("el-dropdown-item",{key:t.id,attrs:{command:{iteam:t,n:i}}},[a("div",{staticClass:"son-name"},[e._v(e._s(t.name))])])})),1)],1)})),1)},n=[],s=a("efe2"),r=(a("9e79"),a("7736")),o=a("102d"),l={name:"menuNav",components:{menuItem:o["default"]},data:function(){return{ihow:!1,menuData:[{name:"线网特征",id:1,props:"icon-spxx",url:"/lineCharacteristics",children:[{name:"道路网",id:11,props:"icon-spxx",url:"/lineCharacteristics/roadDistribution"},{name:"公交线路网",id:12,props:"icon-spxx",url:"/lineCharacteristics/publicTransport"},{name:"公交站点",id:13,props:"icon-spxx",url:"/lineCharacteristics/busStop"},{name:"公交专用道",id:14,props:"icon-spxx",url:"/lineCharacteristics/busLane"},{name:"客运走廊",id:15,props:"icon-spxx",url:"/lineCharacteristics/passengerCorridor"}]},{name:"客流分析",id:2,props:"icon-wdgl",url:"/journal",children:[{name:"线路客流",id:15,props:"icon-spxx",url:"/lineCharacteristics/linelist"},{name:"断面客流",id:16,props:"icon-spxx",url:"/lineCharacteristics/linelist"},{name:"公交站点",id:17,props:"icon-spxx",url:"/lineCharacteristics/linelist"},{name:"公交专用道",id:18,props:"icon-spxx",url:"/lineCharacteristics/linelist"}]},{name:"运营服务",id:3,props:"icon-spxx",url:"/lineCharacteristics"},{name:"线网优化",id:4,props:"icon-wdgl",url:"/journal"}],meauindex:0}},computed:Object(s["a"])(Object(s["a"])({},Object(r["b"])(["menuFlag"])),{},{sliceRouter:function(){return this.$route.path.slice(1)}}),created:function(){},methods:{changemenu:function(e){this.meauindex=e.n,this.$router.push(e.iteam.url)}}},c=l,u=(a("9f55"),a("30a9"),a("4ac2")),d=Object(u["a"])(c,i,n,!1,null,"ae09c998",null);t["default"]=d.exports},7:function(e,t){},"70c3":function(e,t,a){e.exports=function(e){return a("feca")("./"+e+".vue").default}},"775a":function(e,t,a){"use strict";a("4738")},"7a19":function(e,t,a){"use strict";var i={docHeight:function(e){return e.app.docHeight},isBreak:function(e){return e.user.isBreak},menuFlag:function(e){return e.app.menuFlag},userId:function(e){return e.user.userId},realname:function(e){return e.user.realname},ishuadata:function(e){return e.user.ishuadata},roleCode:function(e){return e.user.roleCode},roleId:function(e){return e.user.roleId},userInfo:function(e){return e.user.userInfo},userName:function(e){return e.user.userName},userRole:function(e){return e.user.userRole},routerNow:function(e){return e.user.routerNow},userStation:function(e){return e.user.userStation},aloading:function(e){return e.user.aloading},isbtn:function(e){return e.user.isbtn},heatData:function(e){return e.user.heatData},threeMap:function(e){return e.user.threeMap},btnAuth:function(e){return e.user.btnAuth},menuData:function(e){return e.permission.menuData},routers:function(e){return e.permission.routers},addRouters:function(e){return e.permission.addRouters},token:function(e){return e.user.token},constructionCode:function(e){return e.user.constructionCode},constructionName:function(e){return e.user.constructionName}};t["a"]=i},"7b06":function(e,t,a){},"7d90":function(e,t,a){},"834c":function(e,t,a){"use strict";a("93b1")},"84f8":function(e,t,a){},"89fd":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"busLane-box"})},n=[],s={components:{},data:function(){return{}},beforeCreate:function(){},created:function(){var e=this;setTimeout((function(){e.$store.commit("SET_LOADING",!1)}),2e3)},mounted:function(){},methods:{}},r=s,o=(a("6117"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"4a3de3aa",null);t["default"]=l.exports},"8b24":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contentPage"},[a("div",{staticClass:"contentBorder"},[a("el-row",{staticClass:"topAdd"},[a("el-col",{staticClass:"queryinp",staticStyle:{width:"300px"}},[a("div",[a("el-input",{attrs:{placeholder:"用户名或姓名查找",size:"small"},model:{value:e.query.userName,callback:function(t){e.$set(e.query,"userName",t)},expression:"query.userName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getRoleTab},slot:"append"})],1)],1)]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addrole}},[e._v("添加用户")])],1),a("el-row",{staticClass:"rolecontent"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.tabLoading,expression:"tabLoading"}],staticClass:"roleTab",attrs:{"element-loading-text":"拼命加载中"}},[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleTabData,stripe:"",border:"",height:e.$store.getters.docHeight}},[a("el-table-column",{attrs:{resizable:!1,type:"index",width:"60",label:"序号",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"userName",label:"用户名",width:"160",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"realName",label:"姓名",width:"160",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"updateName",label:"创建人",width:"160",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"status",label:"状态",formatter:e.Fstatus,width:"160",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"remark",label:"描述",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,fixed:"right",label:"操作",align:"center",width:"315"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.allocation(t.row)}}},[e._v("角色分配")]),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.updateAuth(t.row)}}},[e._v("更新")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.cancelBtn(t.row,1)}}},[e._v("注销")]),1==t.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.cancelBtn(t.row,2)}}},[e._v("冻结")]):e._e(),2==t.row.status?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.cancelBtn(t.row,3)}}},[e._v("解冻")]):e._e()]}}])})],1)],1)])],1),a("div",{staticClass:"tabbottom"},[a("el-pagination",{attrs:{background:"","current-page":e.query.page,"page-sizes":[10,20,50,100],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"用户信息",visible:e.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{close:e.emptyForm,"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"80px","label-position":"right"}},[a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.addForm.userName,callback:function(t){e.$set(e.addForm,"userName",t)},expression:"addForm.userName"}})],1),a("el-form-item",{attrs:{label:"姓名",prop:"realName"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.addForm.realName,callback:function(t){e.$set(e.addForm,"realName",t)},expression:"addForm.realName"}})],1),a("el-form-item",{attrs:{label:"组织"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.originTree,props:e.defaultProps,"change-on-select":"","show-all-levels":!1},on:{change:e.selectOrg},model:{value:e.parent,callback:function(t){e.parent=t},expression:"parent"}})],1),a("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择角色"},model:{value:e.addForm.roleId,callback:function(t){e.$set(e.addForm,"roleId",t)},expression:"addForm.roleId"}},e._l(e.allRole,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择用户状态"},model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},e._l(e.userStatus,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入描述内容"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.subBtnLonging},on:{click:e.subForm}},[e._v("确 定")])],1)],1),a("el-dialog",{staticStyle:{width:"100%"},attrs:{visible:e.dialogform,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogform=t},close:e.emptyroleForm}},[a("div",{staticStyle:{"text-align":"center","margin-top":"-44px","font-size":"22px"}},[e._v(" 角色分配 "),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.thisRow.userName))])]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.isShowForm=!0}}},[e._v("添加角色")]),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{"highlight-current-row":"",border:"",data:e.roleAllotTab}},[a("el-table-column",{attrs:{resizable:!1,prop:"orgName",label:"组织"}}),a("el-table-column",{attrs:{resizable:!1,prop:"roleName",label:"角色"}}),a("el-table-column",{attrs:{resizable:!1,fixed:"right",label:"操作",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteRole(t.row)}}},[e._v("删除")]),1==t.row.mainOrg?a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("主要角色")]):a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.mainRole(t.row)}}},[e._v("设置为主要角色")])]}}])})],1),e.isShowForm?a("el-form",{ref:"roleForm",staticStyle:{"margin-top":"20px"},attrs:{inline:!0,model:e.roleForm,rules:e.rules,"label-width":"80px","label-position":"right"}},[a("el-form-item",{attrs:{label:"组织"}},[a("el-cascader",{attrs:{options:e.originTree,props:e.defaultProps,"change-on-select":"","show-all-levels":!1},on:{change:e.selectOrg},model:{value:e.parent,callback:function(t){e.parent=t},expression:"parent"}})],1),a("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[a("el-select",{attrs:{placeholder:"选择角色"},model:{value:e.roleForm.roleId,callback:function(t){e.$set(e.roleForm,"roleId",t)},expression:"roleForm.roleId"}},e._l(e.allRole,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",size:"mini"},on:{click:e.addRole}},[e._v("添加")])],1)],1):e._e()],1)],1)},n=[],s=a("b358"),r=s["a"],o=(a("3d70"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"3f439f95",null);t["default"]=l.exports},"8bfb":function(e,t,a){"use strict";a("b1d0");var i={state:{userId:"",aloading:!0,roleId:"",userName:"",ishuadata:2,token:"",routerNow:"",userInfo:"",roleCode:"",realname:"",heatData:[],userRole:[],userStation:[],threeMap:[],btnAuth:"",isBreak:"",constructionCode:"",constructionName:"",isbtn:1},mutations:{SET_BTNAUTH:function(e,t){e.isbtn=t},SET_THREEMAP:function(e,t){e.threeMap=t},SET_HEATMAP:function(e,t){e.heatData=t},SET_LOADING:function(e,t){e.aloading=t},SET_REALNAME:function(e,t){e.realname=t},SET_USERINFO:function(e,t){e.userInfo=t},SET_ISBREAK:function(e,t){e.isBreak=t},SET_TOKEN:function(e,t){e.token=t},SET_ID:function(e,t){e.userId=t},SET_ROLEID:function(e,t){e.roleId=t},SET_ROLECODE:function(e,t){e.roleCode=t},SET_NAME:function(e,t){e.userName=t},SET_ROLES:function(e,t){e.userRole=t},SET_STATION:function(e,t){e.userStation=t},SET_ROUTERNOW:function(e,t){e.routerNow=t},SET_CONSTRUCTIONCODE:function(e,t){e.constructionCode=t},SET_CONSTRUCTIONNAME:function(e,t){e.constructionName=t}},actions:{}};t["a"]=i},"8d47":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"publicTransport-box"},[e._m(0),a("div",{staticClass:"leftlinemsg1"},[a("div",{staticClass:"titbox"},[a("div",{staticClass:"titboxname"},e._l(e.lisData,(function(t,i){return a("div",{key:i,class:e.islist==i+1?"meay meay-active":"meay",on:{click:function(a){return e.tomeay(t)}}},[e._v(e._s(t.name))])})),0),e._m(1)]),e._m(2),a("div",{staticClass:"tablbox"},e._l(e.lineaData,(function(t,i){return a("div",{key:i,staticClass:"bttit bttit1"},[a("div",[e._v(e._s(i+1))]),a("div",[e._v(e._s(t.name))]),a("div",[e._v(e._s(t.id))])])})),0)]),e._m(3)])},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"leftlinemsg"},[i("div",{staticClass:"tit"},[e._v("线网分布信息")]),i("div",{staticClass:"itmsg-box"},[i("div",{staticClass:"itmsg"},[i("div",{staticClass:"itmsgs"},[i("img",{staticStyle:{"margin-right":"0.4vw"},attrs:{src:a("a6cc")}}),e._v(" 线路总数 ")]),i("div",[e._v("264条")])]),i("div",{staticClass:"itmsg"},[i("div",{staticClass:"itmsgs"},[i("img",{staticStyle:{"margin-right":"0.4vw"},attrs:{src:a("1edf")}}),e._v(" 线路总长 ")]),i("div",[e._v("4422.75公里")])]),i("div",{staticClass:"itmsg"},[i("div",{staticClass:"itmsgs"},[i("img",{staticStyle:{"margin-right":"0.4vw"},attrs:{src:a("be82")}}),e._v(" 线路重复系数 ")]),i("div",[e._v("2.42")])]),i("div",{staticClass:"itmsg"},[i("div",{staticClass:"itmsgs"},[i("img",{staticStyle:{"margin-right":"0.4vw"},attrs:{src:a("25ca")}}),e._v(" 线网密度 ")]),i("div",[e._v("10.14")])]),i("div",{staticClass:"itmsg"},[i("div",{staticClass:"itmsgs"},[i("img",{staticStyle:{"margin-right":"0.4vw"},attrs:{src:a("1edf")}}),e._v(" 线网长度 ")]),i("div",[e._v("3650.5公里")])])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"imgtit"},[i("img",{staticStyle:{"margin-right":"0.4vw"},attrs:{src:a("a391")}}),e._v(" 下载 ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bttit"},[a("div",[e._v("排名")]),a("div",[e._v("线路名称")]),a("div",[e._v("线长(公里)")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lkicon"},[a("div",{staticStyle:{"text-align":"center"}},[e._v("线网颜色说明(条)")]),a("div",{staticClass:"lkicon-box"},[a("div",{staticClass:"lkicon-itam"},[a("div",{staticClass:"lk1"}),e._v("1-4 ")]),a("div",{staticClass:"lkicon-itam"},[a("div",{staticClass:"lk1 lk2"}),e._v("5-6 ")]),a("div",{staticClass:"lkicon-itam"},[a("div",{staticClass:"lk1 lk3"}),e._v("7-8 ")]),a("div",{staticClass:"lkicon-itam"},[a("div",{staticClass:"lk1 lk4"}),e._v("大于8 ")])])])}],s={components:{},data:function(){return{lisData:[{name:"最长线路",id:1},{name:"最短线路",id:2}],islist:1,lineaData:[{name:"919",id:1},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8},{name:"790",id:42.8}]}},beforeCreate:function(){},created:function(){var e=this;setTimeout((function(){e.$store.commit("SET_LOADING",!1)}),2e3)},mounted:function(){},methods:{tomeay:function(e){this.islist=e.id}}},r=s,o=(a("834c"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"a669e48e",null);t["default"]=l.exports},"8f5e":function(e,t,a){},"8f74":function(e,t,a){},"90ec":function(e,t,a){},"926b":function(e,t,a){"use strict";a.r(t);var i,n,s=a("4ac2"),r={},o=Object(s["a"])(r,i,n,!1,null,null,null);t["default"]=o.exports},"93b1":function(e,t,a){},"95a3":function(e,t,a){"use strict";(function(e){a("74e1"),a("effe"),a("ea2d");t["a"]={data:function(){return{isAction:"",query:{page:1,pageSize:20,table_name:""},tabLoading:!1,roleTabData:[],total:0,dialogFormVisible:!1,dialogform:!1,addForm:{name:"",code:"",descr:"",authIds:""},treeData:[],selectId:"",subBtnLonging:!1,rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],code:[{required:!0,message:"请输入角色编码",trigger:"blur"}]}}},watch:{dialogFormVisible:function(e,t){var a=this;e&&a.$nextTick((function(){a.initzTree(a.selectId)}))}},created:function(){this.getAuthsTree()},mounted:function(){this.getRoleTab()},methods:{getRoleTab:function(){var e=this;this.tabLoading=!0,this.$fetchGet("sitioaTableCtrl/getSitiTableDict",this.query).then((function(t){e.tabLoading=!1,e.roleTabData=t.list,e.total=t.total}))},addrole:function(){this.dialogFormVisible=!0,this.isAction="add"},check:function(e){var t=this;this.$fetchGet("auths/roleId/"+e.id).then((function(e){t.dialogform=!0,t.isAction="look",t.$nextTick((function(){this.menuTree(e)}))}))},updateAuth:function(t){var a=this;this.$fetchGet("auths/roleId/"+t.id).then((function(i){var n=[];e.each(a.treeData,(function(t,a){a.ranges="diffent",e.each(i,(function(e,t){a.id==t.id&&(n.push(t.id),a.ranges=t.ranges)}))})),a.selectId=n,e.each(a.addForm,(function(e,i){a.addForm[e]=t[e]+""})),a.isAction="update",a.dialogFormVisible=!0,a.addForm.id=t.id}))},deleteAuth:function(e){var t=this;this.$confirm("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$fetchDelete("roles/delete/"+e.id).then((function(e){1==e?(t.Gsuccess("删除成功！"),t.getRoleTab()):t.Gerror("删除失败！")}))}))},subForm:function(){var e=this;this.$refs.addForm.validate((function(t){if(t){var a=e.cloneObj(e.addForm);if(""==a.authIds)return void e.Gwarning("权限不能为空!");e.subBtnLonging=!0,"add"===e.isAction?e.$axios.post("roles",{},{params:a}).then((function(t){0==t.status?(e.Gsuccess("添加成功"),e.dialogFormVisible=!1,e.getRoleTab()):e.Gerror(t.message),e.subBtnLonging=!1})):"update"===e.isAction&&e.$axios.put("roles",{},{params:a}).then((function(t){0==t.status?(e.Gsuccess("更新成功"),e.dialogFormVisible=!1,e.getRoleTab()):e.Gerror(t.message),e.subBtnLonging=!1}))}}))},emptyForm:function(){this.addForm={name:"",code:"",descr:"",authIds:""},this.$refs.addForm.resetFields()},getAuthsTree:function(){var e=this;this.$fetchGet("auths/authsTree").then((function(t){e.treeData=t}))},menuTree:function(t){var a="_a",i={edit:{drag:{isCopy:!1,isMove:!0},enable:!1},view:{addDiyDom:n},check:{enable:!1},data:{keep:{leaf:!0,parent:!0},simpleData:{open:!0,enable:!0,idKey:"id",pIdKey:"pid"},key:{name:"authName"}}};function n(t,i){if(!i.parentNode||2==i.parentNode.id){var n=e("#"+i.tId+a);if(i.rangeName){var s="<select class='selDemo' id='"+i.id+"'><option value='r'>"+i.rangeName+"</option></select>";n.after(s)}}}var s=e.fn.zTree.init(e("#tree"),i,t);s.expandAll(!0)},initzTree:function(t){var a=this,i="_a",n={edit:{drag:{isCopy:!1,isMove:!0},removeTitle:"删除",renameTitle:"更新",enable:!1},view:{addDiyDom:s},check:{enable:!0,chkStyle:"checkbox",radioType:"all"},callback:{onCheck:r},data:{keep:{leaf:!0,parent:!0},simpleData:{open:!0,enable:!0,idKey:"id",pIdKey:"pid"},key:{name:"name",url:"href"}}};function s(t,n){if(!n.parentNode||2==n.parentNode.id){var s=e("#"+n.tId+i),o="";if("add"==a.isAction){if(o="",3==n.type&&1==n.setRange){o="<select class='selDemo' id='"+n.id+"'><option value='my-self'>限本人</option><option value='my-orga'>限所属部门</option><option value='all'>所有数据</option></select>",s.after(o);var l=e("#"+n.id);l&&l.bind("change",(function(){r(t,n)}))}}else if("update"==a.isAction)if(o="",3==n.type&&1==n.setRange&&"diffent"==n.ranges){o="<select class='selDemo' id='"+n.id+"'><option value='my-self'>限本人</option><option value='my-orga'>限所属部门</option><option value='all'>所有数据</option></select>",s.after(o);l=e("#"+n.id);l&&l.bind("change",(function(){r(t,n)}))}else if(3==n.type&&1==n.setRange&&"all"==n.ranges){o="<select class='selDemo' id='"+n.id+"'><option value='my-self'>限本人</option><option value='my-orga'>限所属部门</option><option value='all' selected=selectd>所有数据</option></select>",s.after(o);l=e("#"+n.id);l&&l.bind("change",(function(){r(t,n)}))}else if(3==n.type&&1==n.setRange&&"my-self"==n.ranges){o="<select class='selDemo' id='"+n.id+"'><option value='my-self' selected=selectd >限本人</option><option value='my-orga'>限所属部门</option><option value='all'>所有数据</option></select>",s.after(o);l=e("#"+n.id);l&&l.bind("change",(function(){r(t,n)}))}else if(3==n.type&&1==n.setRange&&"my-orga"==n.ranges){o="<select class='selDemo' id='"+n.id+"'><option value='my-self'  >限本人</option><option value='my-orga' selected=selectd>限所属部门</option><option value='all'>所有数据</option></select>",s.after(o);l=e("#"+n.id);l&&l.bind("change",(function(){r(t,n)}))}}}Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)};function r(t,i,n){var s=e.fn.zTree.getZTreeObj("roletree"),r=s.getCheckedNodes(!0),o=[];[];for(var l=0;l<r.length;l++)3==r[l].type?o.push(r[l].id+"#"+e("#"+r[l].id).val()):o.push(r[l].id);a.addForm.authIds=o}var o,l=e.fn.zTree.init(e("#roletree"),n,a.treeData);0!=a.selectId.length&&e.each(a.selectId,(function(e,t){null!=t&&(o=l.getNodeByParam("id",t)),l.checkNode(o,!0,!1)}));l.expandAll(!0)},handleSizeChange:function(e){this.query.pageSize=e,this.getRoleTab()},handleCurrentChange:function(e){this.query.page=e,this.getRoleTab()}}}}).call(this,a("c65b"))},9705:function(e,t,a){"use strict";a("16d4")},9928:function(e,t,a){"use strict";a("cf5f")},"9a6a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contentPage"},[a("div",{staticClass:"contentBorder"},[a("el-row",{staticClass:"topAdd"},[a("el-col",{staticClass:"queryinp",staticStyle:{width:"300px"}},[a("div",[a("el-input",{attrs:{placeholder:"角色名查找",size:"small"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getRoleTab},slot:"append"})],1)],1)]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addrole}},[e._v("添加角色")])],1),a("el-row",{staticClass:"rolecontent"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.tabLoading,expression:"tabLoading"}],staticClass:"roleTab",attrs:{"element-loading-text":"拼命加载中"}},[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleTabData,stripe:"",border:"",height:e.$store.getters.docHeight-35}},[a("el-table-column",{attrs:{resizable:!1,type:"index",width:"60",label:"序号",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"name",label:"角色名称",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"code",label:"角色编码",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"descr",label:"描述",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,fixed:"right",label:"操作",align:"center",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.check(t.row)}}},[e._v("查看权限")]),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.updateAuth(t.row)}}},[e._v("更新")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteAuth(t.row)}}},[e._v("删除")])]}}])})],1)],1)])],1),a("div",{staticClass:"tabbottom"},[a("el-pagination",{attrs:{background:"","current-page":e.query.page,"page-sizes":[10,20,50,100],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"角色信息",visible:e.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{close:e.emptyForm,"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("div",[a("h3",[e._v("上级权限")]),a("ul",{staticClass:"ztree",attrs:{id:"roletree"}})])]),a("el-col",{attrs:{span:13}},[a("div",[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"80px","label-position":"right"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:"角色编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"请输入角色编码"},model:{value:e.addForm.code,callback:function(t){e.$set(e.addForm,"code",t)},expression:"addForm.code"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"descr"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入描述内容"},model:{value:e.addForm.descr,callback:function(t){e.$set(e.addForm,"descr",t)},expression:"addForm.descr"}})],1),a("el-form-item",{attrs:{"label-width":"100px"}},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.subBtnLonging},on:{click:e.subForm}},[e._v("确 定")])],1)],1)],1)])],1)],1),a("el-dialog",{attrs:{title:"查看权限信息",visible:e.dialogform,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogform=t}}},[a("div",{staticStyle:{padding:"0 35%","box-sizing":"border-box"}},[a("ul",{staticClass:"ztree",attrs:{id:"tree"}})])])],1)},n=[],s=a("4f07"),r=s["a"],o=(a("b349"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"f5a80fc8",null);t["default"]=l.exports},"9e4a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"forget-pwd"},[a("div",{staticClass:"forget-pwd-content"},[a("div",{staticClass:"title-form"},[a("div",{staticClass:"title"},[e._v("找回密码")]),e.resetPwd?a("div",{staticClass:"input-form"},[a("el-form",{ref:"phoneDxForm",staticClass:"ruleSa",attrs:{model:e.phoneDxForm,"show-message":!1,rules:e.phoneDxRules}},[a("el-form-item",{staticStyle:{position:"relative","margin-bottom":"15px"},attrs:{label:"",prop:"number"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入手机号码"},model:{value:e.phoneDxForm.number,callback:function(t){e.$set(e.phoneDxForm,"number",t)},expression:"phoneDxForm.number"}},[a("i",{staticClass:"iconfont",staticStyle:{"font-size":"17px","margin-left":"3px"},attrs:{slot:"prefix"},slot:"prefix"})]),e.phoneFlag?a("span",{staticClass:"error-message"},[e._v(e._s(e.phoneMess))]):e._e()],1),a("div",{staticClass:"dx-code-wrapper"},[a("el-form-item",{staticStyle:{position:"relative","margin-bottom":"0"},attrs:{label:"",prop:"veriCode"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入短信验证码"},model:{value:e.phoneDxForm.veriCode,callback:function(t){e.$set(e.phoneDxForm,"veriCode",t)},expression:"phoneDxForm.veriCode"}},[a("i",{staticClass:"iconfont",staticStyle:{"font-size":"24px"},attrs:{slot:"prefix"},slot:"prefix"})]),e.dxCodeFlag?a("span",{staticClass:"error-message"},[e._v(e._s(e.dxCodeMess))]):e._e()],1),a("el-button",{class:[e.disabledBtn?"dx-code dx-code-grey":"dx-code"],attrs:{disabled:e.disabledBtn},on:{click:e.getCode}},[e._v(e._s(e.codeText))])],1),a("el-form-item",{staticStyle:{"margin-bottom":"0","margin-top":"49px"}},[a("el-button",{attrs:{loading:e.subLoadDxCode,type:"primary"},on:{click:function(t){return e.goBack("phoneDxForm")}}},[e._v("下一步")])],1)],1)],1):a("div",{staticClass:"input-form"},[a("el-form",{ref:"resetPwdForm",staticClass:"ruleSa",attrs:{model:e.resetPwdForm,"show-message":!1,rules:e.resetPwdRules}},[a("el-form-item",{staticStyle:{position:"relative","margin-bottom":"14px"},attrs:{label:"",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.resetPwdForm.password,callback:function(t){e.$set(e.resetPwdForm,"password",t)},expression:"resetPwdForm.password"}},[a("i",{staticClass:"iconfont",staticStyle:{"font-size":"17px","margin-left":"3px"},attrs:{slot:"prefix"},slot:"prefix"})]),e.resetPwdFlag?a("span",{staticClass:"error-message"},[e._v(e._s(e.resetPwdMess))]):e._e()],1),a("el-form-item",{staticStyle:{position:"relative","margin-bottom":"0"},attrs:{label:"",prop:"againPwd"}},[a("el-input",{attrs:{type:"password",placeholder:"再次确认新密码"},model:{value:e.resetPwdForm.againPwd,callback:function(t){e.$set(e.resetPwdForm,"againPwd",t)},expression:"resetPwdForm.againPwd"}},[a("i",{staticClass:"iconfont",staticStyle:{"font-size":"24px"},attrs:{slot:"prefix"},slot:"prefix"})]),e.againResetPwdFlag?a("span",{staticClass:"error-message"},[e._v(e._s(e.againResetPwdMess))]):e._e()],1),a("el-form-item",{staticStyle:{"margin-bottom":"0","margin-top":"48px"}},[a("el-button",{attrs:{loading:e.subLoadResetPwd,type:"primary"},on:{click:function(t){return e.resetPassword("resetPwdForm")}}},[e._v("完成")])],1)],1)],1)])])])},n=[],s=(a("1b9e"),{data:function(){var e=this,t=function(t,a,i){var n=/^[1][2,3,4,5,7,8][0-9]{9}$/;if(!a)return e.phoneMess="手机号码不能为空",e.phoneFlag=!0,i(new Error);e.phoneMess="",e.phoneFlag=!1,i(),n.test(a)?(e.phoneMess="",e.phoneFlag=!1,i()):(e.phoneMess="手机号码为11位整数值",e.phoneFlag=!0,i(new Error))},a=function(t,a,i){var n=/^[0-9]{6}$/;if(!a)return e.dxCodeMess="验证码不能为空",e.dxCodeFlag=!0,i(new Error);e.dxCodeMess="",e.dxCodeFlag=!1,i(),n.test(a)?(e.dxCodeMess="",e.dxCodeFlag=!1,i()):(e.dxCodeMess="验证码为6位整数值",e.dxCodeFlag=!0,i(new Error))},i=function(t,a,i){var n=/^[A-Za-z0-9]{6,}$/;if(!a)return e.resetPwdMess="密码不能为空",e.resetPwdFlag=!0,i(new Error);e.resetPwdMess="",e.resetPwdFlag=!1,i(),n.test(a)?(e.resetPwdMess="",e.resetPwdFlag=!1,i()):(e.resetPwdMess="密码不少于6位英文+数字",e.resetPwdFlag=!0,i(new Error))},n=function(t,a,i){var n=/^[A-Za-z0-9]{6,}$/;if(!a)return e.againResetPwdMess="确认密码不能为空",e.againResetPwdFlag=!0,i(new Error);e.againResetPwdMess="",e.againResetPwdFlag=!1,i(),n.test(a)?(e.againResetPwdMess="",e.againResetPwdFlag=!1,i()):(e.againResetPwdMess="确认密码不少于6位英文+数字",e.againResetPwdFlag=!0,i(new Error))};return{resetPwd:!0,subLoadDxCode:!1,subLoadResetPwd:!1,phoneMess:"",phoneFlag:!1,dxCodeMess:"",dxCodeFlag:!1,phoneDxForm:{number:"",veriCode:""},phoneDxRules:{number:[{required:!0,trigger:"blur",validator:t}],veriCode:[{required:!0,trigger:"blur",validator:a}]},resetPwdMess:"",resetPwdFlag:!1,againResetPwdMess:"",againResetPwdFlag:!1,resetPwdForm:{username:"",password:"",againPwd:""},resetPwdRules:{password:[{required:!0,trigger:"blur",validator:i}],againPwd:[{required:!0,trigger:"blur",validator:n}]},codeText:"获取验证码",timer:60,disabledBtn:!1,time:null,username:""}},mounted:function(){},methods:{getSecond:function(e){this.codeText="重新获取"+this.timer+"s",this.timer--,0==this.timer&&(clearInterval(this.time),this.codeText="发送验证码",this.timer=this.timer,this.disabledBtn=!1)},getCode:function(){var e=this;this.time&&(this.timer=60,clearInterval(this.time));var t=/^1[23456789]\d{9}$/,a=t.test(this.phoneDxForm.number);a?(this.disabledBtn=!0,this.$fetchGet("traffic-investment/sys/sendVeriCode",{number:this.phoneDxForm.number}).then((function(t){console.log(t),200==t.code?e.$message.success(t.message):e.$message.error(t.message)})),this.time=setInterval((function(){e.getSecond(60)}),1e3)):(this.phoneMess="手机号码为11位整数值",this.phoneFlag=!0)},goBack:function(e){var t=this;this.subLoadDxCode=!0,this.$refs[e].validate((function(e){if(!e)return t.$message.error("请正确输入手机号码及验证码信息"),!1;t.$fetchGet("traffic-investment/sys/checkVeriCode",{number:t.phoneDxForm.number,veriCode:t.phoneDxForm.veriCode}).then((function(e){t.subLoadDxCode=!1,console.log(e),200==e.code?(t.resetPwd=!1,t.username=e.result.username,t.$message.success("验证成功")):t.$message.error(e.message)}))}))},resetPassword:function(e){var t=this;this.resetPwdForm.password!=this.resetPwdForm.againPwd||this.againResetPwdFlag||this.resetPwdFlag?(this.againResetPwdMess="新密码与确认密码不相同",this.againResetPwdFlag=!0):(this.subLoadResetPwd=!0,this.$refs[e].validate((function(e){if(!e)return t.$message.error("请正确输入密码及确认密码"),!1;t.$fetchPost("traffic-investment/sys/user/changePassword",{username:t.username,password:t.resetPwdForm.password},"json").then((function(e){t.subLoadResetPwd=!1,200==e.code?(t.$message.success(e.message),t.$router.push({path:"/login"})):t.$message.error(e.message)}))})))}}}),r=s,o=(a("9705"),a("e794"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"0f540aee",null);t["default"]=l.exports},"9eac":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contentPage"},[a("div",{staticClass:"contentBorder"},[a("el-row",{staticClass:"topAdd"},[a("el-col",{staticClass:"queryinp",staticStyle:{width:"300px"}},[a("div",[a("el-input",{attrs:{placeholder:"常量类型或类型编码查找",size:"small"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getTypeTab},slot:"append"})],1)],1)]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.allConst}},[e._v("查看所有")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addTypeBtn}},[e._v("添加常量类型")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addBtn}},[e._v("添加常量")])],1),a("el-row",{staticClass:"Constcontent"},[a("el-col",{staticClass:"typetab",attrs:{span:8}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.typeLoading,expression:"typeLoading"}],attrs:{"element-loading-text":"拼命加载中"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.typeTabData,border:"",height:e.$store.getters.docHeight-35}},[a("el-table-column",{attrs:{resizable:!1,type:"index",width:"60"}}),a("el-table-column",{attrs:{resizable:!1,prop:"name",label:"常量类型"}}),a("el-table-column",{attrs:{resizable:!1,prop:"code",label:"类型编码"}}),a("el-table-column",{attrs:{resizable:!1,fixed:"right",label:"查看详情",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-view G-icon",on:{click:function(a){return e.selecttypeRow(t.row)}}})]}}])}),a("el-table-column",{attrs:{resizable:!1,fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.updateTypeBtn(t.row)}}},[e._v("更新")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteTypeBtn(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"tabbottom"},[a("el-pagination",{attrs:{background:"","current-page":e.query.page,"page-sizes":[10,20,50,100],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.typeTotal},on:{"size-change":e.typeSizeChange,"current-change":e.typeCurrentChange}})],1)],1)]),a("el-col",{staticClass:"consttab",attrs:{span:16}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.constLoading,expression:"constLoading"}],attrs:{"element-loading-text":"拼命加载中"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.constTabData,border:"",height:e.$store.getters.docHeight-35}},[a("el-table-column",{attrs:{resizable:!1,type:"index",width:"60"}}),a("el-table-column",{attrs:{resizable:!1,prop:"typeName",label:"常量类型",width:"120"}}),a("el-table-column",{attrs:{resizable:!1,prop:"pName",label:"父常量",width:"120"}}),a("el-table-column",{attrs:{resizable:!1,prop:"name",label:"常量名称",width:"120"}}),a("el-table-column",{attrs:{resizable:!1,prop:"val",label:"常量值",width:"130"}}),a("el-table-column",{attrs:{resizable:!1,prop:"descr",label:"描述"}}),a("el-table-column",{attrs:{resizable:!1,fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.updateBtn(t.row)}}},[e._v("更新")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteBtn(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"tabbottom"},[a("el-pagination",{attrs:{background:"","current-page":e.constQuery.page,"page-sizes":[10,20,50,100],"page-size":e.constQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.constTotal},on:{"size-change":e.constSizeChange,"current-change":e.constCurrentChange}})],1)],1)])],1),a("el-dialog",{attrs:{title:"常量类型信息",visible:e.typedialogform,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{close:e.emptyTypeForm,"update:visible":function(t){e.typedialogform=t}}},[a("el-form",{ref:"infoTypeForm",attrs:{model:e.infoTypeForm,rules:e.rules,"label-width":"80px","label-position":"right"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"类型名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入类型名称"},model:{value:e.infoTypeForm.name,callback:function(t){e.$set(e.infoTypeForm,"name",t)},expression:"infoTypeForm.name"}})],1)],1)]),a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"类型编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"请输入类型编码"},model:{value:e.infoTypeForm.code,callback:function(t){e.$set(e.infoTypeForm,"code",t)},expression:"infoTypeForm.code"}})],1)],1)])],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.typedialogform=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.subBtnTypeLonging},on:{click:e.subType}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"常量信息",visible:e.dialogform,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{close:e.emptyForm,"update:visible":function(t){e.dialogform=t}}},[a("el-form",{ref:"infoForm",attrs:{model:e.infoForm,rules:e.rules,"label-width":"80px","label-position":"right"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"常量类型",prop:"typeId"}},[a("el-select",{attrs:{placeholder:"请选择常量类型"},model:{value:e.infoForm.typeId,callback:function(t){e.$set(e.infoForm,"typeId",t)},expression:"infoForm.typeId"}},e._l(e.typeTabData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)]),a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"父级常量",prop:"pId"}},[a("el-select",{attrs:{placeholder:"请选择父级常量"},model:{value:e.infoForm.pId,callback:function(t){e.$set(e.infoForm,"pId",t)},expression:"infoForm.pId"}},e._l(e.FconstTabData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"常量名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入常量名称"},model:{value:e.infoForm.name,callback:function(t){e.$set(e.infoForm,"name",t)},expression:"infoForm.name"}})],1)],1)]),a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"常量值",prop:"val"}},[a("el-input",{attrs:{placeholder:"请输入常量值"},model:{value:e.infoForm.val,callback:function(t){e.$set(e.infoForm,"val",t)},expression:"infoForm.val"}})],1)],1)])],1),a("el-form-item",{attrs:{label:"描述",prop:"descr"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入常量描述"},model:{value:e.infoForm.descr,callback:function(t){e.$set(e.infoForm,"descr",t)},expression:"infoForm.descr"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogform=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.subBtnTypeLonging},on:{click:e.subBtn}},[e._v("确 定")])],1)],1)],1)])},n=[],s=a("1dfb"),r=s["a"],o=(a("f77f"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"1965966e",null);t["default"]=l.exports},"9ed6":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.tologin()}}},[e._v("登录")])],1)},n=[],s=a("1b9e"),r=(a("a47b"),a("02df")),o={data:function(){var e=this,t=function(t,a,i){if(""===a)return"username"==t.field?(e.nameFlag=!0,e.nameMess="请输入账号"):(e.pswFlag=!0,e.pswMess="请输入密码"),i(new Error);"username"==t.field?(e.nameFlag=!1,e.nameMess=""):(e.pswFlag=!1,e.pswMess=""),i()};return{iframeUrl:null,checked:!1,subLoad:!1,message:"",nameMess:"",nameFlag:!1,pswMess:"",pswFlag:!1,loginForm:{username:"",password:""},loginRules:{username:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,trigger:"blur",validator:t}]}}},beforeCreate:function(){this.$route.query.flag&&(this.$router.push("/login"),location.reload())},created:function(){console.log((new Date).getDate()),document.cookie="metabase.SESSION=bbbdab37-2391-4bb9-87cf-7577228638f07879"},mounted:function(){var e=a("3aef"),t="http://10.1.30.204:3000",i="f8a44db443fc5ac9b0971ce50698b8c75da37a508e697ee03abbe1f900cbdc04",n={resource:{dashboard:4},params:{},exp:Math.round(Date.now()/1e3)+600},s=e.sign(n,i);this.iframeUrl=t+"/embed/dashboard/"+s+"#bordered=true&titled=true"},methods:{rememberPasswordS:function(e){this.checked=e,this.checked?(localStorage.setItem("userNameSa",this.loginForm.username),localStorage.setItem("checked",!0)):(localStorage.removeItem("userNameSa"),localStorage.removeItem("checked"))},tologin:function(){var e=this,t=new s["a"],a={username:"1229320501@qq.com",password:"999999999"},i=(new Date).getTime();a.password=t.encode(i+"&"+t.encode(a.password)+"&"+i),this.$fetchPost("/login",a).then((function(t){document.cookie="metabase.SESSION="+t.info.metabaseSession,sessionStorage.setItem("metabase.SESSION",t.info.metabaseSession),localStorage.setItem("metabase.SESSION",t.info.metabaseSession),e.$router.push("/lineCharacteristics/roadDistribution")}))},login:Object(r["a"])((function(e){}),300),forget:function(){this.$router.push("/forgetPwd")}}},l=o,c=(a("2017"),a("545f"),a("4ac2")),u=Object(c["a"])(l,i,n,!1,null,"788fda5e",null);t["default"]=u.exports},"9f55":function(e,t,a){"use strict";a("fcbe")},a18c:function(e,t,a){"use strict";a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return f}));var i=a("a593"),n=a("3bc2"),s=a("162e"),r=a("9ed6"),o=a("6588"),l=a("2257"),c=a("8d47"),u=a("add3"),d=a("89fd"),m=a("4396"),h=a("9e4a");i["default"].use(n["a"]);var p=[{path:"/login",name:"login",component:r["default"]},{path:"/forgetPwd",name:"forgetPwd",component:h["default"]},{path:"/layout",name:s["default"],component:s["default"],children:[{path:"/lineCharacteristics",name:"线网特征",component:o["default"],children:[{path:"/lineCharacteristics/roadDistribution",name:"道路网",component:l["default"]},{path:"/lineCharacteristics/publicTransport",name:"公交线路网",component:c["default"]},{path:"/lineCharacteristics/busStop",name:"公交站点",component:u["default"]},{path:"/lineCharacteristics/busLane",name:"公交专用道",component:d["default"]},{path:"/lineCharacteristics/passengerCorridor",name:"客运走廊",component:m["default"]}]}]}],f=[{path:"",component:""}];t["c"]=new n["a"]({routes:p})},a391:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozMDk2REZDMUMxRTcxMUVCODAwQ0RGNDBCQTZCNkM4OCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozMDk2REZDMkMxRTcxMUVCODAwQ0RGNDBCQTZCNkM4OCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjMwOTZERkJGQzFFNzExRUI4MDBDREY0MEJBNkI2Qzg4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjMwOTZERkMwQzFFNzExRUI4MDBDREY0MEJBNkI2Qzg4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+i9GsKQAAASFJREFUeNpi/P//PwM1ARMDlQGLxHeCavYCsRMQ74fSKOAFJ+kuZCbFN1T3MvXDEI9cNRCLArEKlA+iJwDxayBuJcfA80C8BYgZoXxpIM4DYh9yvbwNiBvQxBqg4jgBo/g3vAkb5LqNQOwLxJuB2B+I/xObbDSAeC0QzwdiAagYSHMsEK+H0jDDBKDq1gLTsQa6gazQCLgA1VAIxB+Q1HwE4iAoDQMg+SKo/gtAQ6uBmBXmZVAOcADie0C8GKoBlH+6gfgfjnAvBWJOaJDEA7E8EB8Eet8BZOBPIIcNi0ZfaCyjAx9oeKKDX0AD2UHJ5hIQm+BIh9iSVRmOCLwES4cXcBhoAY0MYsEFWHgsA+LPFOa4L1BzGBgHfQFLdQMBAgwAChxDsKFqP7cAAAAASUVORK5CYII="},a47b:function(e,t,a){"use strict";(function(e){var i=a("a593"),n=a("7736"),s=a("523f"),r=a("8bfb"),o=a("21b6"),l=a("7a19");i["default"].use(n["a"]);var c=new n["a"].Store({modules:{app:s["a"],user:r["a"],permission:o["a"]},getters:l["a"]});function u(t){var a=100/1920,i=t*a;e("html").css("font-size",i+"px")}u(e(document).width()),window.addEventListener("resize",(function(){c.commit("SET_HEIGHT",e(document).height()-180),u(e(document).width())})),t["a"]=c}).call(this,a("c65b"))},a6cc:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFMzUzMUM0NEMxRTYxMUVCOEVDOEYyQjI2RTdFODlGQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFMzUzMUM0NUMxRTYxMUVCOEVDOEYyQjI2RTdFODlGQyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkUzNTMxQzQyQzFFNjExRUI4RUM4RjJCMjZFN0U4OUZDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkUzNTMxQzQzQzFFNjExRUI4RUM4RjJCMjZFN0U4OUZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+1w2ARgAAAhlJREFUeNqs1E9IVFEUx/GZaSRcJP3DRNuF9MdAzSAIxIVRVIs0KoNQci2UIAijooRtbCPWopYVSRhB0UKykozA3BhGShZGooYtFJQG/DMy0/fI78nt4VsIc+Ez7827M+edc995N5xKpULpHNGaOxvn+YjhLHIQxyA68ToowOPG/7+HqzvWM7yIJ9iOdxhHNs4hC3dRD385B7EHYwReXM8QBXiKWVRgxPnDTjzCDUzgnq4fQTeK9D1BpR0cWy1giwJfwBdfBgu4jGHcwgNk4i2WUYVpVWhx4hE+zuCjE6xW2fbA5ldV8i6U4BJyUYkGvMcQntmyRPTDaSerLj0UezgndO27jjkKlsRfFGvdr2up9lmpczjsBPyGAzr/oaM3P6NglshxWI+UogkP8dUmXqmUU/pTGa7hKOaVwU1M4TN68UldYZVdVbn2gGIWsB2Lulihxe7DH+xXAMuwUdmt4TSe4z4+IA/ltE6vBZxUv63gBW4r02KtXZl6sMdZlrge3qBeiBqCDXh9GNLEIbxBM36hTQtfokb3j1W1VBXBXvrfFG/kaZ2yVZ6VZnduxclN3hRvbEMdgcejvonfuIJ+NXK/nmBMc8mAgNbse92S3WGLfF5vg7dpJPATS7q2rBuO+jeHaMAd+5zzFrWEbQRhXduBY06/bhrQNoHdATeYEW8UIkMSQQHLt7CPJpVAwj8RTveOHQmlefwTYAC52YpfwSA3mgAAAABJRU5ErkJggg=="},a854:function(e,t,a){},aaf1:function(e,t,a){var i={"./af":"0674","./af.js":"0674","./ar":"6cc2","./ar-dz":"b1de","./ar-dz.js":"b1de","./ar-kw":"7d0b","./ar-kw.js":"7d0b","./ar-ly":"4064","./ar-ly.js":"4064","./ar-ma":"56ad","./ar-ma.js":"56ad","./ar-sa":"adaa","./ar-sa.js":"adaa","./ar-tn":"5221","./ar-tn.js":"5221","./ar.js":"6cc2","./az":"1a3f","./az.js":"1a3f","./be":"84b2","./be.js":"84b2","./bg":"a213","./bg.js":"a213","./bm":"8b34","./bm.js":"8b34","./bn":"3482","./bn-bd":"98bb","./bn-bd.js":"98bb","./bn.js":"3482","./bo":"a3f6","./bo.js":"a3f6","./br":"72ea","./br.js":"72ea","./bs":"fa2c","./bs.js":"fa2c","./ca":"f217","./ca.js":"f217","./cs":"1b54","./cs.js":"1b54","./cv":"ae9c","./cv.js":"ae9c","./cy":"7554","./cy.js":"7554","./da":"b478","./da.js":"b478","./de":"35a9","./de-at":"5b88","./de-at.js":"5b88","./de-ch":"7475","./de-ch.js":"7475","./de.js":"35a9","./dv":"4c16","./dv.js":"4c16","./el":"3f33","./el.js":"3f33","./en-au":"73ff","./en-au.js":"73ff","./en-ca":"bfc9","./en-ca.js":"bfc9","./en-gb":"428a","./en-gb.js":"428a","./en-ie":"6b5c","./en-ie.js":"6b5c","./en-il":"eb4a","./en-il.js":"eb4a","./en-in":"3fbf","./en-in.js":"3fbf","./en-nz":"89f8","./en-nz.js":"89f8","./en-sg":"13d6","./en-sg.js":"13d6","./eo":"dfd6","./eo.js":"dfd6","./es":"5221e","./es-do":"7a70","./es-do.js":"7a70","./es-mx":"a656","./es-mx.js":"a656","./es-us":"3081","./es-us.js":"3081","./es.js":"5221e","./et":"45f3","./et.js":"45f3","./eu":"d1a1","./eu.js":"d1a1","./fa":"6773","./fa.js":"6773","./fi":"259f","./fi.js":"259f","./fil":"32e2","./fil.js":"32e2","./fo":"0e60","./fo.js":"0e60","./fr":"0600","./fr-ca":"6520","./fr-ca.js":"6520","./fr-ch":"2b9c","./fr-ch.js":"2b9c","./fr.js":"0600","./fy":"23bb","./fy.js":"23bb","./ga":"f9bb","./ga.js":"f9bb","./gd":"088a","./gd.js":"088a","./gl":"da3a","./gl.js":"da3a","./gom-deva":"e728","./gom-deva.js":"e728","./gom-latn":"b781","./gom-latn.js":"b781","./gu":"ab1a","./gu.js":"ab1a","./he":"2e9a","./he.js":"2e9a","./hi":"77d9","./hi.js":"77d9","./hr":"334c","./hr.js":"334c","./hu":"9f96","./hu.js":"9f96","./hy-am":"f2d9","./hy-am.js":"f2d9","./id":"7e6f","./id.js":"7e6f","./is":"770b","./is.js":"770b","./it":"aed5","./it-ch":"72a8","./it-ch.js":"72a8","./it.js":"aed5","./ja":"d5462","./ja.js":"d5462","./jv":"63b1","./jv.js":"63b1","./ka":"517d","./ka.js":"517d","./kk":"1320","./kk.js":"1320","./km":"b9f3","./km.js":"b9f3","./kn":"d861","./kn.js":"d861","./ko":"ce13","./ko.js":"ce13","./ku":"ecb8","./ku.js":"ecb8","./ky":"885a","./ky.js":"885a","./lb":"aa9dd","./lb.js":"aa9dd","./lo":"579e","./lo.js":"579e","./lt":"b8d7","./lt.js":"b8d7","./lv":"1bb4","./lv.js":"1bb4","./me":"673d","./me.js":"673d","./mi":"26ae","./mi.js":"26ae","./mk":"e174","./mk.js":"e174","./ml":"4a84","./ml.js":"4a84","./mn":"aadd","./mn.js":"aadd","./mr":"a2a5","./mr.js":"a2a5","./ms":"d18a","./ms-my":"66b0","./ms-my.js":"66b0","./ms.js":"d18a","./mt":"7fb0","./mt.js":"7fb0","./my":"74d1","./my.js":"74d1","./nb":"5fd8","./nb.js":"5fd8","./ne":"4e84","./ne.js":"4e84","./nl":"6f41","./nl-be":"6f69","./nl-be.js":"6f69","./nl.js":"6f41","./nn":"e69e","./nn.js":"e69e","./oc-lnc":"8d28","./oc-lnc.js":"8d28","./pa-in":"b000","./pa-in.js":"b000","./pl":"510c","./pl.js":"510c","./pt":"714b","./pt-br":"e9f3","./pt-br.js":"e9f3","./pt.js":"714b","./ro":"a876","./ro.js":"a876","./ru":"ba7c","./ru.js":"ba7c","./sd":"25dc","./sd.js":"25dc","./se":"d540","./se.js":"d540","./si":"1b0a","./si.js":"1b0a","./sk":"bfa3","./sk.js":"bfa3","./sl":"d112","./sl.js":"d112","./sq":"8f41","./sq.js":"8f41","./sr":"61ee","./sr-cyrl":"17eb","./sr-cyrl.js":"17eb","./sr.js":"61ee","./ss":"0d66","./ss.js":"0d66","./sv":"820c","./sv.js":"820c","./sw":"dbbf","./sw.js":"dbbf","./ta":"70b6","./ta.js":"70b6","./te":"67e8","./te.js":"67e8","./tet":"9609","./tet.js":"9609","./tg":"a19a","./tg.js":"a19a","./th":"459d","./th.js":"459d","./tk":"b2a1","./tk.js":"b2a1","./tl-ph":"341b","./tl-ph.js":"341b","./tlh":"b24c","./tlh.js":"b24c","./tr":"8f6c","./tr.js":"8f6c","./tzl":"fea0","./tzl.js":"fea0","./tzm":"9828","./tzm-latn":"a859","./tzm-latn.js":"a859","./tzm.js":"9828","./ug-cn":"0a67","./ug-cn.js":"0a67","./uk":"82cc","./uk.js":"82cc","./ur":"ad72","./ur.js":"ad72","./uz":"015a","./uz-latn":"35be","./uz-latn.js":"35be","./uz.js":"015a","./vi":"90db","./vi.js":"90db","./x-pseudo":"7eee","./x-pseudo.js":"7eee","./yo":"b9ec","./yo.js":"b9ec","./zh-cn":"10ef1","./zh-cn.js":"10ef1","./zh-hk":"c3a6","./zh-hk.js":"c3a6","./zh-mo":"9218","./zh-mo.js":"9218","./zh-tw":"0144","./zh-tw.js":"0144"};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=s,e.exports=n,n.id="aaf1"},add3:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"busStop-box"},[a("div",{staticClass:"search-box"},[a("div",{staticStyle:{"margin-right":"0.8vw"}},[e._v("行政区域")]),a("el-select",{staticStyle:{"margin-right":"1.5vw"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-autocomplete",{staticClass:"inline-input",attrs:{size:"small","fetch-suggestions":e.querySearch,placeholder:"请输入内容","trigger-on-focus":!1},on:{select:e.handleSelect},model:{value:e.state2,callback:function(t){e.state2=t},expression:"state2"}}),a("div",{staticClass:"clearbtn",staticStyle:{"margin-left":"0.8vw"}},[e._v("清除")]),a("div",{class:2==e.isheat?"rltbtn rltbtn1":"rltbtn",staticStyle:{"margin-left":"1.8vw"},on:{click:e.allheat}},[e._v("热力图")]),a("div",{class:1==e.point?"rltbtn rltbtn1":"rltbtn",staticStyle:{"margin-left":"1.8vw"},on:{click:e.allpoint}},[e._v("站点分布")]),a("div",{staticStyle:{"margin-left":"1.8vw"}},[e._v("站点覆盖区域 ")]),a("div",{staticClass:"qhbtn"},e._l(e.typelst,(function(t,i){return a("div",{key:i,class:e.isbtn==t.id?"btnnow activebtn":"btnnow",on:{click:function(a){return e.tobtn(t)}}},[e._v(e._s(t.name))])})),0)],1),e._m(0)])},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"leftlinemsg"},[i("div",{staticClass:"tit"},[e._v("基本指标")]),i("div",{staticClass:"itmsg-box"},[i("div",{staticClass:"itmsg"},[i("div",{staticClass:"itmsgs"},[i("img",{staticStyle:{"margin-right":"0.4vw"},attrs:{src:a("a6cc")}}),e._v(" 站点总数 ")]),i("div",[e._v("264条")])]),i("div",{staticClass:"itmsg"},[i("div",{staticClass:"itmsgs"},[i("img",{staticStyle:{"margin-right":"0.4vw"},attrs:{src:a("1edf")}}),e._v(" 300米站点覆盖面积 ")]),i("div",[e._v("4422.75公里")])]),i("div",{staticClass:"itmsg"},[i("div",{staticClass:"itmsgs"},[i("img",{staticStyle:{"margin-right":"0.4vw"},attrs:{src:a("be82")}}),e._v(" 300米站点覆盖率 ")]),i("div",[e._v("2.42")])]),i("div",{staticClass:"itmsg"},[i("div",{staticClass:"itmsgs"},[i("img",{staticStyle:{"margin-right":"0.4vw"},attrs:{src:a("25ca")}}),e._v(" 300米站点覆盖面积 ")]),i("div",[e._v("10.14")])]),i("div",{staticClass:"itmsg"},[i("div",{staticClass:"itmsgs"},[i("img",{staticStyle:{"margin-right":"0.4vw"},attrs:{src:a("1edf")}}),e._v(" 300米站点覆盖率 ")]),i("div",[e._v("3650.5公里")])])])])}],s=(a("9438"),a("dd8d"),{components:{},data:function(){return{options:[{value:"选项1",label:"曹路"},{value:"选项2",label:"金桥"},{value:"选项3",label:"川沙"},{value:"选项4",label:"唐镇"},{value:"选项5",label:"南汇"}],value:"",state2:"",typelst:[{name:"300米",id:1},{name:"500米",id:2}],isbtn:1,point:1,isheat:1}},beforeCreate:function(){},created:function(){this.pointAll()},mounted:function(){},methods:{querySearch:function(e,t){var a=this.restaurants,i=e?a.filter(this.createFilter(e)):a;console.log(i),i.forEach((function(e){e.value=e.stationName})),t(i)},createFilter:function(e){return function(t){return 0===t.stationName.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){console.log(e)},tobtn:function(e){this.isbtn=e.id,this.$emit("changefun",{isbtn:e.id})},allpoint:function(){1==this.point?this.point=2:this.point=1,console.log(this.point),this.$emit("changefun",{ispoint:this.point})},allheat:function(){1==this.isheat?this.isheat=2:this.isheat=1,this.$emit("changefun",{isheat:this.isheat})},pointAll:function(){var e=this;this.$fetchGet("indicator/stationList").then((function(t){if(t.result&&t.result["站点的详细属性"]){var a=e.cloneObj(t.result["站点的详细属性"]),i=[];e.restaurants=e.cloneObj(t.result["站点的详细属性"]),e.$store.commit("SET_STATION",t.result["站点的详细属性"]),a.forEach((function(e){var t={};t.lng=e.longitude,t.lat=e.latitude,i.push(t)})),e.$store.commit("SET_HEATMAP",i),setTimeout((function(){e.$store.commit("SET_LOADING",!1)}),2e3)}})),this.$fetchGet("indicator/stationCoverArea").then((function(t){var a=JSON.parse(t.result.geo300.num),i=[];a.forEach((function(e){var t=[];t.push(e),i.push(t)})),console.log(i),e.$store.commit("SET_THREEMAP",i)}))}}}),r=s,o=(a("16e4"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"b36728e8",null);t["default"]=l.exports},b06f:function(e,t,a){},b1d0:function(e,t,a){"use strict";a.d(t,"b",(function(){return h})),a.d(t,"a",(function(){return p})),a.d(t,"c",(function(){return f})),a.d(t,"d",(function(){return g}));a("1e1b"),a("6dbb"),a("e0e8");var i=a("82ae"),n=a.n(i),s=a("a18c"),r=a("a47b"),o=a("fed1"),l=a.n(o),c=a("2763"),u=n.a.create({baseURL:"/busbrain",timeout:5e3,withCredentials:!0});function d(e,t,a){return new Promise((function(i,n){u({url:t,method:e,params:a,headers:{"Content-Type":"application/json;charset=UTF-8"}}).then((function(e){i(e)}),(function(e){n(e)})).catch((function(e){n(e)}))}))}function m(e,t,a,i){return new Promise((function(n,s){u({url:t,method:e,data:"json"==i?a:l.a.stringify(a),headers:{"Content-Type":"json"==i?"application/json;charset=UTF-8":"application/x-www-form-urlencoded;charset=UTF-8"}}).then((function(e){n(e)}),(function(e){s(e)})).catch((function(e){s(e)}))}))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return d("get",e,t)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return d("delete",e,t)}function f(e,t,a){return m("post",e,t,a)}function g(e,t,a){return m("put",e,t,a)}u.interceptors.request.use((function(e){return r["a"].getters.token&&(e.headers["token"]=r["a"].getters.token),e}),(function(e){return Promise.reject(e)})),u.interceptors.response.use((function(e){var t=e.data;return t}),(function(e){var t=e.response;if(401==t.status)switch(t.status){case 401:c["Message"].error({message:"登录过期，请重新登录"}),s["c"].replace({path:"/login?flag=true"});break}else c["Message"].error({message:"网络错误，请刷新重试"});return Promise.reject(e)}))},b349:function(e,t,a){"use strict";a("e124")},b358:function(e,t,a){"use strict";(function(e){a("9e79");var i=a("02df");a("effe"),a("ea2d");t["a"]={data:function(){var e=function(e,t,a){if(""===t)return a(new Error("请选择"));a()};return{userStatus:[{label:"有效",value:1},{label:"冻结",value:2}],userFstatus:["","有效","冻结"],isAction:"",query:{page:1,pageSize:20},tabLoading:!1,roleTabData:[],total:0,dialogFormVisible:!1,dialogform:!1,addForm:{id:"",userName:"",realName:"",status:"",orgIds:"",roleIds:"",remark:""},subBtnLonging:!1,roleAllotTab:[],thisRow:{},originTree:[],roleForm:{userId:"",orgId:"",roleId:""},allRole:[],parent:[],defaultProps:{label:"name",children:"children",value:"id"},isShowForm:!1,rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],realName:[{required:!0,message:"请输入姓名",trigger:"blur"}],status:[{required:!0,validator:e,trigger:"change"}],roleId:[{required:!0,validator:e,trigger:"change"}]}}},created:function(){this.getorgsTree(),this.getAllRole()},mounted:function(){this.getRoleTab()},methods:{getAllRole:function(){var e=this;this.$fetchGet("roles/idAndName").then((function(t){e.allRole=t}))},getorgsTree:function(){var e=this;this.$fetchGet("orgs/getTree").then((function(t){var a=e.parseChildren(1,t.slice(0));e.deleteChildren(a),e.originTree=a}))},getRoleTab:function(){var e=this;this.tabLoading=!0,this.$fetchGet("users",this.query).then((function(t){e.tabLoading=!1,e.roleTabData=t.list,e.total=t.total}))},getNewRole:function(){var e=this;this.$fetchGet("users/getRoleByUser/"+this.roleForm.userId).then((function(t){e.roleAllotTab=t}))},addRole:function(){var e=this;""!=this.roleForm.orgId?this.$refs.roleForm.validate((function(t){t&&e.$fetchPost("users/saveOrgAndRole",e.roleForm).then((function(t){1==t?(e.Gsuccess("添加成功"),e.getNewRole()):e.Gerror("添加失败",+t.message)}))})):this.Gwarning("角色组织不能为空")},deleteRole:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$fetchDelete("users/deleteOrgAndRole",{userId:e.userId,orgId:e.orgId,roleId:e.roleId}).then((function(e){1==e?(t.Gsuccess("删除成功"),t.getNewRole()):t.Gerror("删除失败",+e.message)}))}))},mainRole:function(e){var t=this;this.$fetchPut("roles/signMainOrg",{userId:e.userId,orgId:e.orgId,roleId:e.roleId}).then((function(e){0==e.status?(t.Gsuccess("更新成功"),t.getNewRole()):t.Gerror("更新失败",+e.message)}))},allocation:function(e){this.dialogform=!0,this.roleForm.userId=e.id,this.thisRow=e,this.getNewRole()},addrole:function(){this.dialogFormVisible=!0,this.isAction="add"},updateAuth:function(t){var a=this;e.each(this.addForm,(function(e,i){a.addForm[e]=t[e]})),this.isAction="update",this.dialogFormVisible=!0,this.addForm.id=t.id},cancelBtn:function(e,t){var a,i,n=this;switch(t){case 1:a="注销",i="users/cancelUser/";break;case 2:a="冻结",i="users/freezeUser/";break;case 3:a="解冻",i="users/unFreezeUser/";break}this.$confirm("确认".concat(a,"？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.$fetchPut(i+e.id).then((function(e){"success"==e?(n.Gsuccess("".concat(a,"成功！")),n.getRoleTab()):n.Gerror("".concat(a,"失败！"))}))}))},freezeBtn:function(e){var t=this;this.$confirm("确认冻结？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$fetchPut("users/freezeUser/"+e.id).then((function(e){"success"==e?(t.Gsuccess("冻结成功！"),t.getRoleTab()):t.Gerror("冻结失败！")}))}))},subForm:Object(i["a"])((function(){var e=this;this.$refs.addForm.validate((function(t){if(t){var a=e.cloneObj(e.addForm);e.subBtnLonging=!0,"add"===e.isAction?e.$fetchPost("users",a).then((function(t){t?(e.Gsuccess("添加成功"),e.dialogFormVisible=!1,e.getRoleTab()):e.Gerror(t.message),e.subBtnLonging=!1})):"update"===e.isAction&&e.$fetchPut("users",a).then((function(t){t?(e.Gsuccess("更新成功"),e.dialogFormVisible=!1,e.getRoleTab()):e.Gerror(t.message),e.subBtnLonging=!1}))}}))}),300),emptyForm:function(){this.addForm={userName:"",realName:"",status:"",remark:""},this.$refs.addForm.resetFields()},emptyroleForm:function(){this.roleForm={userId:"",orgId:"",roleId:""},this.isShowForm&&(this.$refs.roleForm.resetFields(),this.isShowForm=!1)},selectOrg:function(e){e.length>0&&(this.addForm.orgId=e[e.length-1],this.roleForm.orgId=e[e.length-1])},handleSizeChange:function(e){this.query.pageSize=e,this.getRoleTab()},handleCurrentChange:function(e){this.query.page=e,this.getRoleTab()},Fstatus:function(e){return this.userFstatus[e.status]},parseChildren:function(t,a){var i=this,n=[];return e.each(a,(function(e,s){s.pid===t&&(n.push(s),s.children=i.parseChildren(s.id,a))})),n},deleteChildren:function(t){var a=this;e.each(t,(function(e,t){t.children&&t.children.length?a.deleteChildren(t.children):delete t.children}))}}}}).call(this,a("c65b"))},b4b2:function(e,t,a){},bcf9:function(e,t,a){"use strict";a("fa54")},bd07:function(e,t,a){"use strict";a("f32c")},be82:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNjI3MTdCRkMxRTYxMUVCQkEwQUNGNjM0NkFCOTkxNCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNjI3MTdDMEMxRTYxMUVCQkEwQUNGNjM0NkFCOTkxNCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU2MjcxN0JEQzFFNjExRUJCQTBBQ0Y2MzQ2QUI5OTE0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU2MjcxN0JFQzFFNjExRUJCQTBBQ0Y2MzQ2QUI5OTE0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+aNqYfgAAAahJREFUeNrM1E8oBGEYx/GZbSVJ2jgoq5TNyZ+TRAo5UMpBe3Cwu+WAHBw3NyeF1N6Uctg2SVkuDuxBiRA3f6Ld9rCyOXASF5HxffIkbbNrDnvw1sc7mff9zfO+886almUZxWwuo8jNHVw0Guhj6MQ1RnHhcH4r1tCEEwSlwije0I8UtmA6CDN1bErnSkbUzZ8ure4USWRQi+wfgTJGVtcXCxt3rPRFqnTpxAEdFMAnahxUWKb9svaSkTUDC5afiw3IEyrxgWetPFmgOrlXDkvHV2BEKozDh0nd3GEN3tf/57ZqXGnYoc6RuT6WHnfroIySdiNPwiYOsJQTGIYH5+iOhX/mfB+bPEvaxirGEbG5/4oO23OYJ3AIY3jCes49OadVOLYLlZcifT3adW/qsINH9CBts4fpX/s8jWacsfxMobfcq1+OXZOH3uZ7y7JHc7rRs7oNgwXCpN2jTa93qcyjGREJ9GJPb8b0k3pwcLBftJ/SXjK8suQjLt4xjwm0oFGX8te3LN/xJVYwgxKpMIRSJDTI7yDM0DF+nZPQjJD5739gix74JcAAF6BvdwiGFGsAAAAASUVORK5CYII="},c276:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("e7e7"),a("22e1"),a("6dbb"),a("e0e8"),a("eee8"),a("ff25"),a("3f94"),a("a573"),a("dd8d"),a("69ea"),a("7f0d"),a("08fc"),a("9ee9"),a("a593"),a("1472");function i(e){var t=(new Date).getTime(),a=t-e;return a>=864e5&&a<=1728e5}function n(e){var t=(new Date).getTime(),a=new Date(t).Format("yyyy-MM-dd hh:mm:ss"),i=new Date(e).Format("yyyy-MM-dd hh:mm:ss");return a.substr(0,4)==i.substr(0,4)}function s(e){var t=(new Date).getTime(),a=new Date(e),s=a.getTime(),r=t-s,o="";if(r<=6e4)o="刚刚 ";else if(r>6e4&&r<36e5)o=Math.floor(r/6e4)+"分钟前";else if(r>=36e5&&r<=864e5)o=e.substr(11,5);else if(!0===i(s)&&!0===n(s))o="昨天 "+e.substr(11,5);else if(!1===i(s)&&!0===n(s))o=e.substr(5,11);else if(!1===i(s)&&!1===n(s))o=e.substr(0,11);return o}Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e}},c546:function(e,t,a){"use strict";(function(e){t["a"]={data:function(){return{}},mounted:function(){this.$nextTick((function(){e(".containererrPage").height(e(document).height()-200),window.onresize=function(){e(".containererrPage").height(e(document).height()-200)}}))},methods:{back:function(){this.$router.go(-1)}}}}).call(this,a("c65b"))},c684:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"project-inquiry inquiry-quiry"},[a("div",{staticClass:"project-header"},[a("div",{staticClass:"top-input"},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.askForm.content,callback:function(t){e.$set(e.askForm,"content",t)},expression:"askForm.content"}})],1),a("div",{staticClass:"bottom-btn"},[a("div",{staticClass:"btn-l-l"},[a("div",{staticClass:"btn-l",on:{click:function(t){return t.stopPropagation(),e.askWho(t)}}},[a("span",{staticClass:"desc1"},[e._v("@")]),a("span",{staticClass:"desc2"},[e._v(e._s(e.curCheckPeople?e.curCheckPeople:"向谁提问"))]),e.peopleModel?a("div",{staticClass:"people-list"},[a("div",{staticClass:"input-wrapper"},[a("el-input",{attrs:{placeholder:"请输入关键字",clearable:""},on:{change:e.changePeopleName},model:{value:e.curPeopleWrite,callback:function(t){e.curPeopleWrite=t},expression:"curPeopleWrite"}})],1),e._l(e.userList1,(function(t,i){return a("div",{key:i,class:[e.curPeopleIndex==i?"list-item list-item-active":"list-item"],on:{click:function(a){return a.stopPropagation(),e.checkPeople(t,i)}}},[e._v(e._s(t.realname))])}))],2):e._e()]),a("div",{staticClass:"btn-l",on:{click:function(t){return t.stopPropagation(),e.checkProject(t)}}},[a("span",{staticClass:"desc2"},[e._v(e._s(e.curCheckProject?e.curCheckProject:"项目名称"))]),e.projectModel?a("div",{staticClass:"people-list"},[a("div",{staticClass:"input-wrapper"},[a("el-input",{attrs:{placeholder:"请输入关键字",clearable:""},on:{change:e.changeProjectName},model:{value:e.curProjectWrite,callback:function(t){e.curProjectWrite=t},expression:"curProjectWrite"}})],1),e._l(e.projectList1,(function(t,i){return a("div",{key:i,class:[e.curProjectIndex==i?"list-item list-item-active":"list-item"],on:{click:function(a){return a.stopPropagation(),e.checkProjectItem(t,i)}}},[e._v(e._s(t.constructionName))])}))],2):e._e()])]),a("div",{staticClass:"btn-r",on:{click:e.publishQuiry}},[e._v("发布")])])]),a("div",{staticClass:"project-body"},[a("div",{staticClass:"project-body-header"},[a("div",{staticClass:"tab-list"},e._l(e.tableTab,(function(t,i){return a("div",{key:i,class:[e.curIndex==i?"tab-item tab-item-color":"tab-item"],on:{click:function(t){return e.clicktableTab(i)}}},[a("span",{staticClass:"name"},[e._v(e._s(t.name))])])})),0),a("div",{staticClass:"auto-input"},[a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入项目名称关键字",clearable:""},on:{select:e.handleSelect},model:{value:e.curAutoProjectName,callback:function(t){e.curAutoProjectName=t},expression:"curAutoProjectName"}})],1)]),a("div",{staticClass:"project-body-body",style:{height:e.$store.getters.docHeight-326+"px"}},[a("div",{staticClass:"task-list"},e._l(e.tableList,(function(t,i){return a("div",{key:i,staticClass:"list-item-style"},[a("div",{staticClass:"list-item"},[a("div",{staticClass:"item-l"},[a("div",{staticClass:"img-dot"}),a("div",{staticClass:"desc-time-input"},[a("div",{staticClass:"desc-time"},[a("div",{staticClass:"desc"},[a("span",{staticClass:"desc-content"},[a("span",{staticClass:"reply-name"},[e._v(e._s(t.formRealname)+" @ "+e._s(t.toRealname)+"：")]),e._v(" "+e._s(t.content)+" ")])]),a("div",{staticClass:"time"},[e._v(" "+e._s(t.createTimeStr)+" "),a("span",{class:[t.isClick?"reply reply-click":"reply"],on:{click:function(t){return e.reply(i,null)}}},[e._v("回复")]),a("span",{staticClass:"cancle",on:{click:function(a){return e.deleteOneOrTwo(i,null,t.id)}}},[e._v("删除")])])]),t.isClick?a("div",{staticClass:"input-wrapper"},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"我来回答...",maxlength:"300","show-word-limit":t.isClick},model:{value:e.replayDescOne,callback:function(t){e.replayDescOne=t},expression:"replayDescOne"}}),a("div",{staticClass:"btn-publish"},[a("div",{staticClass:"confirm",on:{click:function(t){return e.confirmOneOrTwo(i,null)}}},[e._v("确定")]),a("div",{staticClass:"cancle",on:{click:function(t){return e.cancleOneOrTwo(i,null)}}},[e._v("取消")])])],1):e._e(),a("div",{staticClass:"sub-list"},e._l(t.subList,(function(t,n){return a("div",{key:n,staticClass:"sub-list-item"},[a("div",{staticClass:"desc-time"},[a("div",{staticClass:"desc"},[a("span",{staticClass:"desc-content"},[a("span",{staticClass:"reply-name"},[e._v(e._s(t.formRealname)+" 回复 "+e._s(t.toRealname)+"：")]),e._v(" "+e._s(t.content)+" ")])]),a("div",{staticClass:"time"},[e._v(" "+e._s(t.createTimeStr)+" "),a("span",{class:[t.isClick?"reply reply-click":"reply"],on:{click:function(t){return e.reply(i,n)}}},[e._v("回复")]),a("span",{staticClass:"cancle",on:{click:function(a){return e.deleteOneOrTwo(i,n,t.id)}}},[e._v("删除")])])]),t.isClick?a("div",{staticClass:"input-wrapper"},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"我来回答...",maxlength:"300","show-word-limit":t.isClick},model:{value:e.replayDescTwo,callback:function(t){e.replayDescTwo=t},expression:"replayDescTwo"}}),a("div",{staticClass:"btn-publish"},[a("div",{staticClass:"confirm",on:{click:function(t){return e.confirmOneOrTwo(i,n)}}},[e._v("确定")]),a("div",{staticClass:"cancle",on:{click:function(t){return e.cancleOneOrTwo(i,null)}}},[e._v("取消")])])],1):e._e()])})),0)])])])])})),0)]),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.query.pageNo,"page-size":e.query.pageSize,layout:"total,prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[e._v(">")])],1)]),a("el-dialog",{attrs:{title:"提示",visible:e.cancleDialogVisible,width:"20%","show-close":!1},on:{"update:visible":function(t){e.cancleDialogVisible=t}}},[a("span",[e._v("确认删除吗?")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cancleDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmCancleInfo}},[e._v("确 定")])],1)])],1)},n=[],s=(a("9438"),a("74e1"),a("dd8d"),a("5c04"),a("c276")),r={name:"projectInquiry",data:function(){return{tableTab:[{name:"全部",num:11},{name:"我发出的",num:11}],curIndex:0,tableList:[],replayDesc:"",rowNum:1,isClick:!1,isSubClick:!1,curListIndex:null,curSubListIndex:null,timeNew:null,userList:[],userList1:[],curPeopleIndex:null,peopleModel:!1,askForm:{constructionCode:"",content:"",toUid:null,topicType:"ask"},replyForm:{content:"",toUid:null,fromUid:null,topicId:null},curCheckPeople:"",replayDescOne:"",replayDescTwo:"",query:{pageNo:1,pageSize:10,constructionCode:"",type:"ask"},curReplayIndex:null,curReplayIndexs:null,curPeopleWrite:"",projectList:[],projectList1:[],curProjectIndex:null,curProjectWrite:"",curCheckProject:"",projectModel:!1,cancleDialogVisible:!1,curId:null,curAutoProjectName:"",total:0}},created:function(){this.getPeopleList()},mounted:function(){this.getProjectList(),this.getProjectInquiryList()},methods:{querySearchAsync:function(e,t){var a=this.projectList,i=e?a.filter(this.createStateFilter(e)):a;t(i)},createStateFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){this.getProjectInquiryList(e.constructionCode),this.getProjectInquiryList1(e.constructionCode)},deleteOneOrTwo:function(e,t,a){this.cancleDialogVisible=!0,this.curReplayIndex=e,this.curReplayIndexs=t,this.curId=a},confirmCancleInfo:function(){var e=this;this.curReplayIndexs||0===this.curReplayIndexs?this.$fetchGet("traffic-investment/comment-item/delete",{id:this.curId}).then((function(t){if(200==t.code){e.$message.success(t.message);var a=e.tableList[e.curReplayIndex].subList;a.splice(e.curReplayIndexs,1)}else e.$message.error(t.message);e.cancleDialogVisible=!1})):this.$fetchGet("traffic-investment/comment/delete",{id:this.curId}).then((function(t){200==t.code?(e.$message.success(t.message),e.tableList.splice(e.curReplayIndex,1),e.total=e.total>0?e.total-1:0):e.$message.error(t.message),e.cancleDialogVisible=!1}))},getProjectList:function(){var e=this;this.$fetchGet("traffic-investment/construction/list").then((function(t){t.result.records.forEach((function(e){e.value=e.constructionName})),e.projectList=t.result.records,e.projectList1=t.result.records}))},checkProject:function(){this.projectModel=!0,this.peopleModel=!1},changeProjectName:function(e){var t=this.curProjectWrite.toLowerCase(),a=[];t?(this.projectList.filter((function(e){-1!==e.constructionName.toLowerCase().indexOf(t)&&a.push(e)})),this.projectList1=a):this.projectList1=this.projectList},checkProjectItem:function(e,t){this.curProjectIndex=t,this.askForm.constructionCode=e.constructionCode,this.curCheckProject=e.constructionName,this.projectModel=!1},changePeopleName:function(){var e=this.curPeopleWrite.toLowerCase(),t=[];e?(this.userList.filter((function(a){-1!==a.realname.toLowerCase().indexOf(e)&&t.push(a)})),this.userList1=t):this.userList1=this.userList},confirmOneOrTwo:function(e,t){this.replyForm.topicId=Number(this.tableList[e].id),t||0===t?(this.replyForm.toUid=this.tableList[e].subList[t].fromUid,this.replyForm.fromUid=Number(this.$store.getters.userId),this.replyForm.content=this.replayDescTwo):(this.replyForm.toUid=this.tableList[e].fromUid,this.replyForm.fromUid=Number(this.$store.getters.userId),this.replyForm.content=this.replayDescOne),this.replyItem(e,t)},cancleOneOrTwo:function(e,t){t||0===t?this.$set(this.tableList[e].subList[t],"isClick",!1):this.$set(this.tableList[e],"isClick",!1),this.replayDescOne="",this.replayDescTwo="",this.curReplayIndex=null,this.curReplayIndexs=null},replyItem:function(e,t){var a=this;this.$fetchPost("traffic-investment/comment-item/add",this.replyForm,"json").then((function(i){200==i.code?(a.replayDescOne="",a.replayDescTwo="",a.curReplayIndex=null,a.curReplayIndexs=null,t||0===t?(a.$set(a.tableList[a.curListIndex].subList[a.curSubListIndex],"isClick",!1),a.tableList[e].subList.push(i.result)):(a.$set(a.tableList[a.curListIndex],"isClick",!1),a.tableList[e].subList.unshift(i.result)),a.func(a.tableList),a.funRealname(a.tableList),a.$message.success(i.message)):a.$message.error(i.message)}))},publishQuiry:function(){var e=this;this.askForm.constructionCode&&(this.askForm.toUid||0===this.askForm.toUid)?this.$fetchPost("traffic-investment/comment/add",this.askForm,"json").then((function(t){200==t.code?(e.curCheckPeople="",e.curPeopleIndex=null,e.askForm.content="",e.$message.success(t.message)):e.$message.error(t.message),e.curReplayIndex||0===e.curReplayIndex||e.curReplayIndexs||0===e.curReplayIndexs||(t.result.subList=[],e.tableList.unshift(t.result),e.func(e.tableList),e.funRealname(e.tableList),e.total+=1,e.curReplayIndex=null,e.curReplayIndexs=null)})):this.$message.error("请选择向谁提问及项目名称进行发布")},checkPeople:function(e,t){this.curPeopleIndex=t,this.askForm.toUid=e.id,this.curCheckPeople=e.realname,this.peopleModel=!1},getPeopleList:function(){var e=this;this.$fetchGet("traffic-investment/sys/user/listByRoleId",{realname:"",roleId:""}).then((function(t){t.result.forEach((function(e){e.value=e.realname})),e.userList=t.result,e.userList1=t.result}))},askWho:function(){this.peopleModel=!0,this.projectModel=!1},goback:function(){this.$emit("parentEvent",{isRefresh:7,gobackzyorjh:this.gobackzyorjh})},func:function(e){var t=this;Array.isArray(e)&&e.length>0&&e.forEach((function(e,a){t.userList.forEach((function(a){a.id==e.fromUid&&t.$set(e,"formRealname",a.realname),a.id==e.toUid&&t.$set(e,"toRealname",a.realname)})),e.createTime&&t.$set(e,"createTimeStr",Object(s["a"])(e.createTime)),t.func(e.subList)}))},funRealname:function(e){var t=this;e&&e.length>0&&e.forEach((function(e,a){t.userList.forEach((function(a){a.id==e.fromUid&&t.$set(e,"formRealname",a.realname),a.id==e.toUid&&t.$set(e,"toRealname",a.realname)})),t.funRealname(e.subList)}))},textareaShow:function(e,t){t||0==t?(this.$set(this.tableList[e].subList[t],"isClick",!0),this.curListIndex=e,this.curSubListIndex=t):(this.$set(this.tableList[e],"isClick",!0),this.curListIndex=e,this.curSubListIndex=null)},reply:function(e,t){null==this.curListIndex&&null==!this.curSubListIndex?this.textareaShow(e,t):!this.curListIndex&&0!=this.curListIndex||!this.curSubListIndex&&0!=this.curSubListIndex?!this.curListIndex&&0!=this.curListIndex||this.curSubListIndex&&0==this.curSubListIndex||this.$set(this.tableList[this.curListIndex],"isClick",!1):this.$set(this.tableList[this.curListIndex].subList[this.curSubListIndex],"isClick",!1),this.textareaShow(e,t),this.curReplayIndex=e,this.curReplayIndexs=t},getProjectInquiryList:function(e){var t=this;this.query.constructionCode=e,this.$fetchGet("traffic-investment/comment/all",this.query).then((function(e){t.tableList=e.result.records,t.total=e.result.total,t.func(t.tableList),t.funRealname(t.tableList),t.tableList3=t.tableList}))},getProjectInquiryList1:function(e){var t=this;this.query.constructionCode=e,this.$fetchGet("traffic-investment/comment/allByMine",this.query).then((function(e){t.tableList=e.result.records,t.total=e.result.total,t.func(t.tableList),t.funRealname(t.tableList)}))},clicktableTab:function(e){this.query.pageNo=1,this.curIndex=e,0===e?this.getProjectInquiryList():this.getProjectInquiryList1()},handleSizeChange:function(e){this.query.pageSize=e,0===this.curIndex?this.getProjectInquiryList():this.getProjectInquiryList1()},handleCurrentChange:function(e){this.query.pageNo=e,0===this.curIndex?this.getProjectInquiryList():this.getProjectInquiryList1()}}},o=r,l=(a("27b4"),a("bd07"),a("4ac2")),c=Object(l["a"])(o,i,n,!1,null,"49bc04fc",null);t["default"]=c.exports},c930:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABlElEQVQ4T5WTMU/CUBDH7xCMxE1DaJkggYqaOIm7kUE/gEZn/QYy0DpYB1sG/AY6a/QD6KBxFycTFUsTmKCE6GYwgpx5tZQWWhK79N397379v3d9CD5PuiUK3R5lmBwMYKkcUTWvUvRKCk3pkog2nRoiXmlRZWu4fgSQMkTyc8XyFU519biCZFMqItG+CSD4AIRra70BCDNmGvFEjyq5/kdsQPJdXMAOPA8EzGqccsdiwZDWCOi2r1EIFvVZ9YXFA4Ah7iLAqZlE0LSoOufcitAU34hA+DMHezqnnvkCmDBBlCjzhRpbpxv5+A9i1XbgBRAa+QwhPthbQLiBnmU7gFkiWLc1ohWNL5RcDpaM3HQbQxoQxMZNARDqYeoIT1zx0wVgQbKRlxHxcByAiI50viCPTIEl5lsS3+3Ro68LhHowgMuvEaXhCTBdOKYx7MR5+r4AC3KMAJITQACKzqkHw1DPu8CKUoZ4DgDbVsNFhVN3vM7GFxCvylOh8Pc9a+q0J1drCfnrXwDzF66LafbWYmrZbzK/JlyQEb5AgD0AAAAASUVORK5CYII="},c957:function(e,t,a){"use strict";a("e6dd")},cdca:function(e,t,a){"use strict";a("ded8")},ce4a:function(e,t,a){},cec6:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"system-notification"},[e._v("系统通知")])},n=[],s={name:"systemNotification",data:function(){return{}},created:function(){},mounted:function(){},methods:{}},r=s,o=(a("bcf9"),a("5bd4"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"3ca2a8bf",null);t["default"]=l.exports},cf5f:function(e,t,a){},d0a0:function(e,t,a){},d4c2:function(e,t,a){"use strict";a("dd4d")},d6e4:function(e,t,a){},d766:function(e,t,a){},d887:function(e,t,a){"use strict";a("90ec")},da5c:function(e,t,a){"use strict";(function(e){a("9e79"),a("5cb1"),a("6dbb"),a("e116"),a("dd8d"),a("7f0d"),a("1e1b"),a("9113"),a("9438");var i=a("02df");t["a"]={data:function(){return{timeFlag:1,provinceData:null,CityData1:null,CityData2:null,tabLoading:!1,query:{page:1,pageSize:20,id:""},authTab:[],total:0,authsTree:[],subBtnLonging:!1,dialogform:!1,parent:[],authForm:{pid:"",name:"",ppath:"",type:"",shortName:""},isAction:"",defaultProps:{label:"name",children:"children",value:"id"},rules:{name:[{required:!0,message:"请输入组织名称",trigger:"blur"},{min:1,max:40,message:"长度在 1 到 40个字符",trigger:"blur"}],shortName:[{required:!0,message:"请输入组织简称",trigger:"blur"}]},parentAuthTree:[],curOrgsAllList:[]}},created:function(){this.getAuthsTree()},mounted:function(){this.getorgAll()},watch:{parent:function(e,t){if(e.length>0){var a=e.slice(0);a.pop(),this.authForm.ppath=a.join(","),this.authForm.pid=e[e.length-1]}},"authForm.province":function(e,t){var a=this;e&&(e=e.split(","),this.timeFlag>1&&(this.authForm.city="",this.authForm.zone=""),this.getCityData(e[1]).then((function(e){a.CityData1=e,a.timeFlag++})))},"authForm.city":function(e,t){var a=this;e&&(e=e.split(","),this.timeFlag>1&&(this.authForm.zone=""),this.getCityData(e[1]).then((function(e){a.CityData2=e,a.timeFlag++})))}},methods:{selectOrg:function(e){var t=this;if(e&&1==e.length)e.forEach((function(e){t.parentAuthTree.forEach((function(a){e==a.id&&(t.authForm.ppath=a.path,t.authForm.pid=a.id)}))}));else if(e&&e.length>1){var a=[e[e.length-1]];a.forEach((function(e){t.parentAuthTree.forEach((function(a){e==a.id&&(t.authForm.ppath=a.path,t.authForm.pid=a.id)}))}))}},getProvinceData:function(){var e=this;this.$fetchGet("robot/getProvinceList").then((function(t){var a=JSON.parse(t).result[0];e.provinceData=a.map((function(e){return e.value=e.fullname+","+e.id,e}))}))},getCityData:function(e){var t=this;return new Promise((function(a,i){t.$fetchGet("robot/getCityZoneList",{id:e}).then((function(e){var t=JSON.parse(e).result[0];a(t.map((function(e){return e.value=e.fullname+","+e.id,e})))}))}))},isAddress:function(){var e=this,t={required:!0,validator:function(t,a,i){if(""==e.authForm.province||""==e.authForm.city||""==e.authForm.zone)return i(new Error("请选择完整地址"));i()}};return t},getorgAll:function(){var e=this;this.$fetchGet("orgs",this.query).then((function(t){e.curOrgsAllList=t.list,e.getAuthTab()}))},getAuthTab:function(){var e=this;this.tabLoading=!0,this.$fetchGet("orgs",this.query).then((function(t){e.tabLoading=!1,t.list&&t.list.length&&t.list.forEach((function(t){t.pid&&e.curOrgsAllList.forEach((function(e){t.pid==e.id&&(t.parentName=e.name)}))})),e.authTab=t.list,e.total=t.total}))},getAuthsTree:function(){var e=this;this.$fetchGet("orgs/getTree").then((function(t){e.parentAuthTree=t,t.forEach((function(e){e.pid||(e.pid=0)}));var a=e.parseChildren(0,t.slice(0));e.deleteChildren(a),e.authsTree=a,e.$store.commit("SET_ORG",t)}))},subForm:Object(i["a"])((function(){var e=this;this.$refs.authForm.validate((function(t){if(t){0==e.parent.length&&(e.authForm.ppath="1");var a=e.cloneObj(e.authForm);e.subBtnLonging=!0,"add"===e.isAction?e.$fetchPost("orgs",a).then((function(t){t?(e.Gsuccess("添加成功"),e.dialogform=!1,e.getAuthTab(),e.getAuthsTree()):e.Gerror(t.message),e.subBtnLonging=!1})):"update"===e.isAction&&e.$fetchPut("orgs",a).then((function(t){t?(e.Gsuccess("更新成功"),e.dialogform=!1,e.getAuthTab(),e.getAuthsTree()):e.Gerror(t.message),e.subBtnLonging=!1}))}}))}),300),authsTreeNodeClick:function(e){this.query.id=e.id,this.getAuthTab(),this.getAuthsTree()},emptyForm:function(){this.authForm={pid:"",name:"",ppath:"",shortName:""},this.parent=[],this.subBtnLonging=!1,this.$refs.authForm.resetFields(),this.$refs.authForm.clearValidate()},parseChildren:function(t,a){var i=this,n=[];return e.each(a,(function(e,s){s.pid===t&&(n.push(s),s.children=i.parseChildren(s.id,a))})),n},deleteChildren:function(t){var a=this;e.each(t,(function(e,t){t.children&&t.children.length?a.deleteChildren(t.children):delete t.children}))},addAuth:function(){this.timeFlag=1,this.isAction="add",this.dialogform=!0},updateAuth:function(t){var a=this;if(console.log(t),this.timeFlag=0,this.isAction="update",this.dialogform=!0,e.each(this.authForm,(function(e,i){a.authForm[e]=t[e]+""})),""==t.path||void 0==t.path)this.parent=[],this.authForm.pid="",this.authForm.ppath="";else{var i=t.path,n=[];i=i.split(","),e.each(i,(function(e,t){n.push(parseInt(t))})),n=n.filter((function(e){return e})),this.parent=n}this.authForm.id=t.id},deleteAuth:function(e){var t=this;this.$confirm("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$fetchDelete("orgs/id/"+e.id).then((function(e){1==e?(t.Gsuccess("删除成功！"),t.getAuthTab(),t.getAuthsTree()):t.Gerror(e.value.id)}))}))},Fdir:function(e){return e.province+","+e.city+","+e.zone+(e.address?","+e.address:"")},handleSizeChange:function(e){this.query.pageSize=e,this.getAuthTab()},handleCurrentChange:function(e){this.query.page=e,this.getAuthTab()},allAuth:function(){this.query.id="",this.getAuthTab()}}}}).call(this,a("c65b"))},db12:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"task-reminder"},[e._v("任务提醒")])},n=[],s={name:"taskReminder",data:function(){return{}},created:function(){},mounted:function(){},methods:{}},r=s,o=(a("c957"),a("d4c2"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"4617be9e",null);t["default"]=l.exports},dd4d:function(e,t,a){},ded8:function(e,t,a){},e124:function(e,t,a){},e6dd:function(e,t,a){},e794:function(e,t,a){"use strict";a("25d6")},ea79:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTFGN0IwRkM0RjgxMUVCQTk2N0Y1QkRDQ0M0MzI2OCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTFGN0IxMEM0RjgxMUVCQTk2N0Y1QkRDQ0M0MzI2OCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MUY3QjBEQzRGODExRUJBOTY3RjVCRENDQzQzMjY4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MUY3QjBFQzRGODExRUJBOTY3RjVCRENDQzQzMjY4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+p2iMzgAAAlNJREFUeNq0VkFoE0EUfbNrUpOm3VqoNhB7UERKe1CrkNKjXhUFwYPgRfCWQ0AEDzkoKD2I5JAePEsPval46aFYemqpKChIFSyKWxIpqEsaazXp+r+bdBvJTDZT9sFfdnZn5v15/8+fEa7rQghxHMAVsjjCwU+yGeJ6L+hlNJFILGUymbhlWaGwOY6DQqFQKZfLaW7fz+VybthgDuYy6NGXTCYRNuocfftkHbbJn4evgYU14HeNglBVTxinmSImkB4Ebo3Ru9G6n5SQyZ6t+u3+/cDNU4AhmvtRzmHqDWBvUIOcmv3sOXgn3XpeQ0b4wm5uR6lnTxTo/c/4W5epHhtohabwZGlIU6LEzsyrJWVUXbX0UkJnC7h8DLg+4n+rbUtkIudEXeonH4FHbzUI2dFExPc8KKyoN1YGQzV4q9Z5+m+2GaMkFKJzQlPsgTBmdk7YLgTS35zyzz8B776pY9KkCNlahbaQqUHInpYqnnWK7oiGpDVXv266rmYMGzKxvO0QC7h9DFXxZtw+Q7G8AJw+KJ/kxADV0IvAteE9EDZU+VIGVh1g44/iOKd/K9+DxVsqxGb9OHq84pkKH34AN+Z2OVDVWOGRXv2kGezWWOHkBHBvGVgsee3sSa9OtsIvKmcPXtFJQcV9pB+4O65BaHUBQz0+4aWj6lVNvvRXNxDT3BbjdA05QMTnhvyslYEd4r5nD2smDWOMtsLT88HixpKzBdkW68ViMfRbW51jfecinM1m46lUKhQy27aRz+f/XYTFrqv+VbJDIS3wK9k0X/X/CjAAHs8EzHH1cz8AAAAASUVORK5CYII="},ecce:function(e,t,a){},f19a:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"asmin",staticStyle:{width:"100%",height:"100%","box-sizing":"border-box"}},[a("router-view")],1)},n=[],s={name:"appMain"},r=s,o=(a("775a"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"4512a169",null);t["default"]=l.exports},f32c:function(e,t,a){},f77f:function(e,t,a){"use strict";a("2629")},f998:function(e,t,a){},fa54:function(e,t,a){},fcb3:function(e,t,a){"use strict";a("5a6b")},fcbe:function(e,t,a){},fcc4:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contentPage"},[a("div",{staticClass:"contentBorder"},[a("el-row",{staticClass:"topAdd"},[a("el-col",{staticClass:"queryinp",staticStyle:{width:"300px"}},[a("div",[a("el-input",{attrs:{placeholder:"用户名或姓名查找",size:"small",clearable:""},model:{value:e.query.userName,callback:function(t){e.$set(e.query,"userName",t)},expression:"query.userName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchName},slot:"append"})],1)],1)]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addrole}},[e._v("添加用户")])],1),a("el-row",{staticClass:"rolecontent"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.tabLoading,expression:"tabLoading"}],staticClass:"roleTab",attrs:{"element-loading-text":"拼命加载中"}},[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleTabData,stripe:"",border:"",height:e.$store.getters.docHeight-35}},[a("el-table-column",{attrs:{resizable:!1,type:"index",width:"60",label:"序号",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"userName",label:"用户名",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"realName",label:"姓名",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"userTel",label:"联系方式",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"orgName",label:"组织",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,prop:"roleName",label:"角色",align:"center"}}),a("el-table-column",{attrs:{resizable:!1,fixed:"right",label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.updateAuth(t.row)}}},[e._v("更新")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.cancelBtn(t.row)}}},[e._v("删除")])]}}])})],1)],1)])],1),a("div",{staticClass:"tabbottom"},[a("el-pagination",{attrs:{background:"","current-page":e.query.page,"page-sizes":[10,20,50,100],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"用户信息",visible:e.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{close:e.emptyForm,"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"80px","label-position":"right"}},[a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.addForm.userName,callback:function(t){e.$set(e.addForm,"userName",t)},expression:"addForm.userName"}})],1),a("el-form-item",{attrs:{label:"姓名",prop:"realName"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.addForm.realName,callback:function(t){e.$set(e.addForm,"realName",t)},expression:"addForm.realName"}})],1),a("el-form-item",{attrs:{label:"联系方式",prop:"userTel"}},[a("el-input",{attrs:{placeholder:"请输入联系方式(11位)"},model:{value:e.addForm.userTel,callback:function(t){e.$set(e.addForm,"userTel",t)},expression:"addForm.userTel"}})],1),a("el-form-item",{attrs:{label:"组织"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.originTree,props:e.defaultProps,"change-on-select":"","show-all-levels":!1},on:{change:e.selectOrg},model:{value:e.parent,callback:function(t){e.parent=t},expression:"parent"}})],1),a("el-form-item",{attrs:{label:"角色",prop:"roleId1"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"选择角色"},on:{change:e.selectRoles},model:{value:e.addForm.roleId1,callback:function(t){e.$set(e.addForm,"roleId1",t)},expression:"addForm.roleId1"}},e._l(e.allRole,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.subBtnLonging},on:{click:e.subForm}},[e._v("确 定")])],1)],1),a("el-dialog",{staticStyle:{width:"100%"},attrs:{visible:e.dialogform,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogform=t},close:e.emptyroleForm}},[a("div",{staticStyle:{"text-align":"center","margin-top":"-44px","font-size":"22px"}},[e._v(" 角色分配 "),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.thisRow.userName))])]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.isShowForm=!0}}},[e._v("添加角色")]),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{"highlight-current-row":"",border:"",data:e.roleAllotTab}},[a("el-table-column",{attrs:{resizable:!1,prop:"orgName",align:"center",label:"组织"}}),a("el-table-column",{attrs:{resizable:!1,prop:"roleName",align:"center",label:"角色"}}),a("el-table-column",{attrs:{resizable:!1,align:"center",label:"操作",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteRole(t.row)}}},[e._v("删除")]),1==t.row.mainOrg?a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("主要角色")]):a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.mainRole(t.row)}}},[e._v("设置为主要角色")])]}}])})],1),e.isShowForm?a("el-form",{ref:"roleForm",staticStyle:{"margin-top":"20px"},attrs:{inline:!0,model:e.roleForm,rules:e.rules,"label-width":"80px","label-position":"right"}},[a("el-form-item",{attrs:{label:"组织"}},[a("el-cascader",{attrs:{options:e.originTree,props:e.defaultProps,"change-on-select":"","show-all-levels":!1},on:{change:e.selectOrg},model:{value:e.parent,callback:function(t){e.parent=t},expression:"parent"}})],1),a("el-form-item",{attrs:{label:"角色",prop:"roleId1"}},[a("el-select",{attrs:{multiple:"",placeholder:"选择角色"},on:{change:e.selectRoles},model:{value:e.roleForm.roleId1,callback:function(t){e.$set(e.roleForm,"roleId1",t)},expression:"roleForm.roleId1"}},e._l(e.allRole,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",size:"mini"},on:{click:e.addRole}},[e._v("添加")])],1)],1):e._e()],1)],1)},n=[],s=a("54f1"),r=s["a"],o=(a("fcb3"),a("4ac2")),l=Object(o["a"])(r,i,n,!1,null,"f4df71a8",null);t["default"]=l.exports},feca:function(e,t,a){var i={"./errorPage/index.vue":"2f3e","./forgetPwd/index.vue":"9e4a","./layout/components/allTask.vue":"926b","./layout/components/appMain.vue":"f19a","./layout/components/components/allCom/index.vue":"5351","./layout/components/components/projectInquiry/index.vue":"c684","./layout/components/components/systemNotification/index.vue":"cec6","./layout/components/components/taskReminder/index.vue":"db12","./layout/components/components/todoList/index.vue":"6636","./layout/components/menu.vue":"6fd2","./layout/components/menuItem.vue":"102d","./layout/index.vue":"162e","./lineCharacteristics/busLane/index.vue":"89fd","./lineCharacteristics/busStop/index.vue":"add3","./lineCharacteristics/index.vue":"6588","./lineCharacteristics/passengerCorridor/index.vue":"4396","./lineCharacteristics/publicTransport/index.vue":"8d47","./lineCharacteristics/roadDistribution/index.vue":"2257","./login/index.vue":"9ed6","./system/auth/index.vue":"28188","./system/const/index.vue":"9eac","./system/dict/index.vue":"046a","./system/index.vue":"26b0","./system/orgs/index.vue":"5480","./system/roles/index.vue":"9a6a","./system/users/index.vue":"fcc4","./system/users/old.vue":"8b24"};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=s,e.exports=n,n.id="feca"}});
//# sourceMappingURL=app.90beeae0.js.map